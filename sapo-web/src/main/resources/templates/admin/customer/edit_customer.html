<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi-VN" class="sapo-menu-expand sapo-menu-toggle-active">
<head>
    <title> Cập nhật thông tin khách hàng</title>

    <th:block th:replace="/admin/customer/layout/header"/>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">

    <link rel="stylesheet" href="/assets/admin/css/customer/edit.css"/>
</head>
<body>
<div id="root">
    <th:block th:replace="/layout/menu"/>

    <div class="col-right jss64 jss40">
        <div class="jss2924">
            <div class="jss2927">
                <div class="jss3580">
                    <a class="MuiTypography-root MuiLink-root MuiLink-underlineNone jss2926 MuiTypography-colorSecondary"
                       href="/admin/customers">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="greiwn">
                            <path d="M14.298 5.99 8.288 12l6.01 6.01 1.414-1.414L11.116 12l4.596-4.596-1.414-1.414Z"
                                  fill="currentColor">
                            </path>
                        </svg>
                        <h6 class="MuiTypography-root MuiTypography-subtitle1">
                            Quay lại danh sách khách hàng
                        </h6>
                    </a>
                </div>
                <div class="jss3581">
                    <button id="btnCloseUpdate" class="kESDbN OrmJe">
                        Hủy
                    </button>
                    <button id="btnUpdateCustomer" class="RthGc btnUpdateCustomer OrmJe">
                        <span class="cMXJOk">
                            Lưu
                        </span>
                    </button>
                </div>
            </div>
        </div>
        <form id="frmUpdateCustomer">
        <div class="jss3817 jss3576">
            <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                <div class="MuiGrid-item MuiGrid-grid-xs-8">
                    <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                            <div class="MuiPaper-root orene">
                                <div class="jss3922 borderBottom">
                                    <div>
                                        <h6 class="MuiTypography-root MuiTypography-h6 wUebT">
                                            Thông tin chung
                                        </h6>
                                    </div>
                                </div>
                                <div class="EnvIa">
                                    <div class="MuiGrid-container MuiGrid-spacing-xs-2">
                                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                            <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                       data-shrink="true" for="fullNameUp">
                                                    Tên khách hàng
                                                    <span class="teYbr"> *</span>
                                                </label>
                                                <div class="MuiFormControl-root jss3956 MuiFormControl-fullWidth">
                                                    <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth LviAv">
                                                        <input aria-invalid="false"
                                                               id="fullNameUp" name="fullNameUp"
                                                               placeholder="Nhập tên khách hàng"
                                                               type="text"
                                                               aria-label="Without label"
                                                               class="MuiInputBase-input MuiOutlinedInput-input">
                                                        <fieldset aria-hidden="true"
                                                                  class="jss4023 MuiOutlinedInput-notchedOutline">
                                                            <legend class="jss4024">
                                                                <span>​</span></legend>
                                                        </fieldset>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                            <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                                                <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                    <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                        <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                               data-shrink="true" for="customerCodeUp">
                                                            Mã khách hàng
                                                        </label>
                                                        <div class="MuiFormControl-root jss3956 MuiFormControl-fullWidth">
                                                            <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth">
                                                                <input aria-invalid="false"
                                                                       id="customerCodeUp"
                                                                       name="customerCodeUp"
                                                                       placeholder="Nhập mã khách hàng"
                                                                       type="text" aria-label="Without label"
                                                                       class="MuiInputBase-input MuiOutlinedInput-input">
                                                                <fieldset aria-hidden="true"
                                                                          class="jss4023 MuiOutlinedInput-notchedOutline">
                                                                    <legend class="jss4024">
                                                                        <span>​</span>
                                                                    </legend>
                                                                </fieldset>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                    <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                        <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                               data-shrink="true" for="customerGroupUp">
                                                            Nhóm khách hàng
                                                        </label>
                                                        <select class="form-select jss87874 Dsifs"
                                                                name="customerGroupUp"
                                                                id="customerGroupUp">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                        <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                    <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                           data-shrink="true" for="phoneUp">
                                                        Số điện thoại
                                                    </label>
                                                    <div class="MuiFormControl-root jss3956 MuiFormControl-fullWidth">
                                                        <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth">
                                                            <input aria-invalid="false"
                                                                   id="phoneUp"
                                                                   name="phoneUp"
                                                                   placeholder="Nhập số điện thoại" type="text"
                                                                   aria-label="Without label"
                                                                   class="MuiInputBase-input MuiOutlinedInput-input">
                                                            <fieldset aria-hidden="true"
                                                                      class="jss4023 MuiOutlinedInput-notchedOutline"
                                                                      style="padding-left: 8px;">
                                                                <legend class="jss4024">
                                                                    <span>​</span>
                                                                </legend>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                    <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                           data-shrink="true" for="emailUp">
                                                        Email
                                                    </label>
                                                    <div class="MuiFormControl-root jss3956 MuiFormControl-fullWidth">
                                                        <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth">
                                                            <input aria-invalid="false"
                                                                   id="emailUp"
                                                                   name="emailUp"
                                                                   placeholder="Nhập địa chỉ email"
                                                                   type="text" aria-label="Without label"
                                                                   class="MuiInputBase-input MuiOutlinedInput-input">
                                                            <fieldset aria-hidden="true"
                                                                      class="jss4023 MuiOutlinedInput-notchedOutline">
                                                                <legend class="jss4024">
                                                                    <span>​</span>
                                                                </legend>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="MuiGrid-item MuiGrid-grid-xs-12 jUjfe">
                        <div class="MuiPaper-root orene LanJw">
                            <div class="jss3922 borderBottom">
                                <div class="jss5773">
                                    <h6 class="MuiTypography-root MuiTypography-h6 wUebT">
                                        Thông tin bổ sung
                                    </h6>
                                </div>
                            </div>
                            <div class="jss4063">
                                <div class="MuiGrid-container MuiGrid-spacing-xs-2">
                                    <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                        <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="jss4122">
                                                    <label for="birthdayUp" class="iocNjj">
                                                        Ngày sinh
                                                    </label>
                                                    <div class="bwybwb">
                                                        <input id="birthdayUp" name="birthdayUp"
                                                               placeholder="Chọn ngày sinh" type="date" class="djQmoa">
                                                        <fieldset class="iUBRZb"></fieldset>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="jss4122">
                                                    <div class="MuiFormControl-root jss4064 MuiFormControl-fullWidth">
                                                        <div class="jss4069">
                                                            <label class="jss4067 MuiInputLabel-animated MuiInputLabel-shrink"
                                                                   data-shrink="true" for="genderUp">
                                                                Giới tính
                                                            </label>
                                                        </div>
                                                        <div class="MuiInputBase-root MuiOutlinedInput-root jss4065 MuiInputBase-fullWidth ">
                                                            <select class="jss87874 form-select Dsifs" name="genderUp"
                                                                    id="genderUp">
                                                                <option value="NAM">Nam</option>
                                                                <option value="NU">Nữ</option>
                                                                <option value="KHAC">Khác</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                        <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                    <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                           data-shrink="true" for="faxUpdate">
                                                        Số fax
                                                    </label>
                                                    <div class="MuiFormControl-root jss3956 MuiFormControl-fullWidth">
                                                        <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth ">
                                                            <input aria-invalid="false" id="faxUpdate"
                                                                   name="faxUpdate" placeholder="Nhập số fax"
                                                                   type="text" aria-label="Without label"
                                                                   class="MuiInputBase-input MuiOutlinedInput-input">
                                                            <fieldset aria-hidden="true"
                                                                      class="jss4023 MuiOutlinedInput-notchedOutline">
                                                                <legend class="jss4024">
                                                                    <span>​</span>
                                                                </legend>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                    <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                           data-shrink="true" for="taxCodeUp">
                                                        Mã số thuế
                                                    </label>
                                                    <div class="MuiFormControl-root jss3956 MuiFormControl-fullWidth">
                                                        <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth">
                                                            <input aria-invalid="false" id="taxCodeUp"
                                                                   name="taxCodeUp" placeholder="Nhập mã số thuế"
                                                                   type="text" aria-label="Without label"
                                                                   class="MuiInputBase-input MuiOutlinedInput-input">
                                                            <fieldset aria-hidden="true"
                                                                      class="jss4023 MuiOutlinedInput-notchedOutline">
                                                                <legend class="jss4024">
                                                                    <span>​</span>
                                                                </legend>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                        <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                    <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                           data-shrink="true" for="websiteUp">
                                                        Website
                                                    </label>
                                                    <div class="MuiFormControl-root jss3956 MuiFormControl-fullWidth">
                                                        <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth">
                                                            <input aria-invalid="false" id="websiteUp"
                                                                   name="websiteUp" placeholder="Nhập tên miền website"
                                                                   type="text" aria-label="Without label"
                                                                   class="MuiInputBase-input MuiOutlinedInput-input">
                                                            <fieldset aria-hidden="true"
                                                                      class="jss4023 MuiOutlinedInput-notchedOutline">
                                                                <legend class="jss4024">
                                                                    <span>​</span>
                                                                </legend>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="MuiGrid-item MuiGrid-grid-xs-6">
                                                <div class="jss4122">
                                                    <div class="MuiFormControl-root jss4064 MuiFormControl-fullWidth">
                                                        <div class="jss4069">
                                                            <label class="jss4067 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                                   data-shrink="true" for="statusUp">
                                                                Trạng thái khách hàng
                                                            </label>
                                                        </div>
                                                        <div class="MuiInputBase-root MuiOutlinedInput-root jss4065 MuiInputBase-fullWidth">
                                                            <select class="jss87874 form-select Dsifs" name="statusUp"
                                                                    id="statusUp">
                                                                <option value="AVAILABLE">Đang giao dịch</option>
                                                                <option value="UNAVAILABLE">Ngừng giao dịch</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="MuiGrid-item MuiGrid-grid-xs-4">
                    <div class="MuiGrid-container MuiGrid-spacing-xs-3">
                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                            <div class="MuiPaper-root orene">
                                <div class="jss4104 jss3922 borderBottom">
                                    <div class="jss5789">
                                        <h6 class="MuiTypography-root MuiTypography-h6 wUebT">
                                            Thông tin khác
                                        </h6>
                                    </div>
                                </div>
                                <div class="EnvIa">
                                    <div class="MuiGrid-container MuiGrid-spacing-xs-2">
                                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                            <div class="jss4122 jss5790">
                                                <div>
                                                    <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                           for="employeeUp">
                                                        Nhân viên phụ trách
                                                    </label>
                                                </div>
                                                <select name="employeeUp" id="employeeUp"
                                                        class="form-select nuYvg Dsifs jss14177">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                            <div class="MuiFormControl-root jss3954 MuiFormControl-fullWidth">
                                                <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"
                                                       data-shrink="true" for="descriptionUp">
                                                    Mô tả
                                                    <span class="MuiTypography-root MuiTypography-caption"
                                                          title="Mô tả khách hàng của bạn để phục vụ cho việc chăm sóc khách hàng tốt hơn">
                                                        <svg viewBox="0 0 16 16" fill="none"
                                                             xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                             class="uehYa">
                                                            <path fill="#0088FF"
                                                                  d="M7.4 5v1.2h1.2V5H7.4ZM7.4 8.6V11h1.8V9.8h-.6V7.4H6.8v1.2h.6Z">
                                                            </path>
                                                            <path fill-rule="evenodd" clip-rule="evenodd" fill="#0088FF"
                                                                  d="M8 2C4.688 2 2 4.688 2 8s2.688 6 6 6 6-2.688 6-6-2.688-6-6-6ZM3.2 8c0 2.646 2.154 4.8 4.8 4.8s4.8-2.154 4.8-4.8S10.646 3.2 8 3.2A4.806 4.806 0 0 0 3.2 8Z">
                                                            </path>
                                                        </svg>
                                                    </span>
                                                </label>
                                                <div class="MuiFormControl-root jss3956 jss3957 MuiFormControl-fullWidth">
                                                    <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth MuiInputBase-multiline MuiOutlinedInput-multiline">
                                                        <textarea aria-invalid="false" id="descriptionUp"
                                                                  name="descriptionUp" placeholder="Nhập mô tả"
                                                                  rows="3" aria-label="Without label"
                                                                  class="MuiInputBase-input MuiOutlinedInput-input MuiInputBase-inputMultiline"></textarea>
                                                        <fieldset aria-hidden="true"
                                                                  class="jss4023 MuiOutlinedInput-notchedOutline">
                                                            <legend class="jss4024">
                                                                <span>​</span>
                                                            </legend>
                                                        </fieldset>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
<!--                                        <div class="MuiGrid-item MuiGrid-grid-xs-12">-->
<!--                                            <div class="MuiFormControl-root jss20481 MuiFormControl-fullWidth">-->
<!--                                                <label class="jss3955 MuiInputLabel-animated MuiInputLabel-shrink jUgebs"-->
<!--                                                       data-shrink="true" for="tagsUp">-->
<!--                                                    Tags-->
<!--                                                    <span class="MuiTypography-root MuiTypography-caption"-->
<!--                                                          title="Chọn hoặc thêm thẻ sẽ cho phép bạn tìm kiếm và lọc khách hàng ở trang danh sách dễ dàng hơn">-->
<!--                                                        <svg viewBox="0 0 16 16" fill="none"-->
<!--                                                             xmlns="http://www.w3.org/2000/svg" width="16" height="16"-->
<!--                                                             class="uehYa">-->
<!--                                                            <path fill="#0088FF"-->
<!--                                                                  d="M7.4 5v1.2h1.2V5H7.4ZM7.4 8.6V11h1.8V9.8h-.6V7.4H6.8v1.2h.6Z">-->
<!--                                                            </path>-->
<!--                                                            <path fill-rule="evenodd" clip-rule="evenodd" fill="#0088FF"-->
<!--                                                                  d="M8 2C4.688 2 2 4.688 2 8s2.688 6 6 6 6-2.688 6-6-2.688-6-6-6ZM3.2 8c0 2.646 2.154 4.8 4.8 4.8s4.8-2.154 4.8-4.8S10.646 3.2 8 3.2A4.806 4.806 0 0 0 3.2 8Z">-->
<!--                                                            </path>-->
<!--                                                        </svg>-->
<!--                                                    </span>-->
<!--                                                </label>-->
<!--                                                <div class="MuiFormControl-root MuiTextField-root jss20483 jss20484 MuiFormControl-fullWidth">-->
<!--                                                    <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth MuiInputBase-formControl MuiInputBase-multiline MuiOutlinedInput-multiline">-->
<!--                                                        <textarea aria-invalid="false" id="tagsUp"-->
<!--                                                                  name="tagsUp" placeholder="Nhập tags"-->
<!--                                                                  rows="3" aria-label="Without label"-->
<!--                                                                  class="MuiInputBase-input MuiOutlinedInput-input MuiInputBase-inputMultiline">-->
<!--                                                        </textarea>-->
<!--                                                        <fieldset aria-hidden="true"-->
<!--                                                                  class="jss4023 MuiOutlinedInput-notchedOutline">-->
<!--                                                            <legend class="jss4024">-->
<!--                                                                <span>​</span>-->
<!--                                                            </legend>-->
<!--                                                        </fieldset>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                                <div class="error tagCreate-error hidden"></div>-->
<!--                                            </div>-->
<!--                                        </div>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                            <div class="MuiPaper-root jss20448 MuiPaper-elevation1 MuiPaper-rounded">
                                <div class="jss20680 jss20449 borderBottom">
                                    <div class="">
                                        <h6 class="MuiTypography-root MuiTypography-h6 wUebT">
                                            Cài đặt nâng cao
                                            <span class="MuiTypography-root MuiTypography-caption"
                                                  title="Thiết lập các thông số tự động dùng trong các giao dịch">
                                                            <svg class="MuiSvgIcon-root MuiSvgIcon-colorPrimary jss20682"
                                                                 focusable="false" viewBox="0 0 12 12"
                                                                 aria-hidden="true">
                                                                <path d="M5.4 3V4.2H6.6V3H5.4Z"
                                                                      fill="currenColor"></path>
                                                                <path d="M5.4 6.6V9H7.2V7.8H6.6V5.4H4.8V6.6H5.4Z"
                                                                      fill="currenColor"></path>
                                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                                      fill="currenColor"
                                                                      d="M6 0C2.688 0 0 2.688 0 6C0 9.312 2.688 12 6 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 6 0ZM1.2 6C1.2 8.646 3.354 10.8 6 10.8C8.646 10.8 10.8 8.646 10.8 6C10.8 3.354 8.646 1.2 6 1.2C3.354 1.2 1.2 3.354 1.2 6Z">
                                                                </path>
                                                            </svg>
                                            </span>
                                        </h6>
                                    </div>
                                </div>
                                <div class="EnvIa">
                                    <div class="MuiGrid-container MuiGrid-spacing-xs-2">
                                        <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                            <div class="jUgebs">
                                                <div class="jss10630">
                                                    <label class="MuiTypography-root MuiTypography-body1">
                                                        Áp dụng ưu đãi
                                                    </label>
                                                </div>
                                                <div class="jss20683">
                                                    <div class="jss20684">
                                                        <div class="jss20685">
                                                            <input type="radio" checked="checked"
                                                                   id="customerGroupRadio" name="radio">
                                                        </div>
                                                        <label for="customerGroupRadio"
                                                               class="MuiTypography-root MuiTypography-body1 jss14177">
                                                            Theo nhóm khách hàng
                                                        </label>
                                                    </div>
                                                    <div class="jss20684">
                                                        <div class="jss20685">
                                                            <input type="radio" id="customerRadio" name="radio">
                                                        </div>
                                                        <label for="customerRadio"
                                                               class="MuiTypography-root MuiTypography-body1 jss14177">
                                                            Theo khách hàng
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="MuiGrid-container MuiGrid-spacing-xs-2 hidden" id="offer">
                                                <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                                    <div>
                                                        <label class="MuiFormLabel-root MuiInputLabel-root jss755"
                                                               data-shrink="true" for="dropdownPaymentMethod">
                                                            Hình thức thanh toán
                                                        </label>
                                                        <select id="dropdownPaymentMethod" class="jss759 diplSI nfFwi">
                                                            <option value="0" class="jss23599">
                                                                Chọn hình thức thanh toán
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                                    <div>
                                                        <div class="">
                                                            <label class="MuiFormLabel-root MuiInputLabel-root jss755"
                                                                   for="searchDefaultPriceDropdown">
                                                                Giá mặc định
                                                            </label>
                                                        </div>
                                                        <div class="dropdown jss1784 jss1769 diplSI jss759"
                                                             onclick="CustomerApp.page.commands.showDefaultPricingPolicyDropdown()"
                                                             id="defaultPriceContainer">
                                                            <p id="selectedPriceDefault">Chọn giá mặc định</p>
                                                        </div>
                                                        <div id="defaultPriceDropdown" class="dropdown-content nauSt">
                                                            <div>
                                                                <div class="jss23596">
                                                                    <div class="jss23775 jss23769">
                                                                        <i class="fa-solid fa-magnifying-glass"></i>
                                                                    </div>
                                                                    <div class="MuiGrid-container">
                                                                        <input type="text"
                                                                               placeholder="Tìm kiếm"
                                                                               class="jss23784"
                                                                               id="searchDefaultPriceDropdown"
                                                                               onkeyup="CustomerApp.searchDefaultPriceDropdown()">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div onclick="CustomerApp.page.commands.showModalCreatePricePolicy()">
                                                                <div class="jss23596">
                                                                    <div class="jss23775 jss23769 jss760">
                                                                        <i class="fa-solid fa-circle-plus"></i>
                                                                    </div>
                                                                    <span class="jss760 jss754">Thêm mới chính sách giá</span>
                                                                </div>
                                                            </div>
                                                            <div id="listPricePolicy" class="jss23783"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="MuiGrid-item MuiGrid-grid-xs-12">
                                                    <div>
                                                        <label class="MuiFormLabel-root MuiInputLabel-root jss755"
                                                               data-shrink="true"
                                                               for="defaultDiscountRate">
                                                            Chiết khấu (%)
                                                        </label>
                                                        <div class="MuiFormControl-root jss756 MuiFormControl-fullWidth"
                                                             field="[object Object]"
                                                             form="[object Object]">
                                                            <div class="MuiInputBase-root MuiOutlinedInput-root MuiInputBase-fullWidth jss759 nfFwi">
                                                                <input aria-invalid="false"
                                                                       id="defaultDiscountRate"
                                                                       name="defaultDiscountRate"
                                                                       type="text"
                                                                       aria-label="Without label"
                                                                       class="MuiInputBase-input MuiOutlinedInput-input jss758 placeholder_text"
                                                                       placeholder="0"
                                                                       fdprocessedid="16ju8f" maxlength='3'
                                                                       onkeypress="return /[0-9]/i.test(event.key)">
                                                                <fieldset
                                                                        aria-hidden="true"
                                                                        class="MuiOutlinedInput-notchedOutline">
                                                                    <legend class="jss824"></legend>
                                                                </fieldset>
                                                            </div>
                                                        </div>
                                                        <div class="error defaultDiscountRate-error hidden"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </form>
    </div>
</div>
</body>
<th:block th:replace="/admin/customer/modal_createPricePolicy"/>
<th:block th:replace="/admin/customer/layout/script"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js"></script>
<script src="/assets/admin/js/customer/customer_app.js"></script>


<script>

    let customer = {};
    let pricingPolicy = {};
    let paymentMethod = {};
    let customerStatus = {};
    let newCustomer = {
        paymentMethod,
        pricingPolicy,
        customerStatus
    };

    CustomerApp.page.elements.frmUpdateCustomer = $("#frmUpdateCustomer");

    CustomerApp.page.elements.fullNameUp = $("#fullNameUp");
    CustomerApp.page.elements.customerCodeUp = $("#customerCodeUp");
    CustomerApp.page.elements.customerGroupUp = $("#customerGroupUp");
    CustomerApp.page.elements.phoneUp = $("#phoneUp");
    CustomerApp.page.elements.emailUp = $("#emailUp");
    CustomerApp.page.elements.birthdayUp = $("#birthdayUp");
    CustomerApp.page.elements.genderUp = $("#genderUp");
    CustomerApp.page.elements.faxUpdate = $("#faxUpdate");
    CustomerApp.page.elements.taxCodeUp = $("#taxCodeUp");
    CustomerApp.page.elements.websiteUp = $("#websiteUp");
    CustomerApp.page.elements.statusUp = $("#statusUp");
    CustomerApp.page.elements.employeeUp = $("#employeeUp");
    CustomerApp.page.elements.descriptionUp = $("#descriptionUp");
    CustomerApp.page.elements.tagsUp = $("#tagsUp");

    CustomerApp.page.elements.dropdownPaymentMethod = $("#dropdownPaymentMethod");
    CustomerApp.page.elements.btnCloseCreatePricePolicyModal = $(".btnCloseCreatePricePolicyModal");
    CustomerApp.page.elements.frmCreatePricePolicy = $("#frmCreatePricePolicy");
    CustomerApp.page.elements.btnCreatePricePolicy = $("#btnCreatePricePolicy");
    CustomerApp.page.elements.btnUpdateCustomer = $("#btnUpdateCustomer");
    CustomerApp.page.elements.defaultPriceDropdown = $("#defaultPriceDropdown");
    CustomerApp.page.elements.modalCreatePricePolicy = $("#modalCreatePricePolicy");
    CustomerApp.page.elements.error = $(".error");
    CustomerApp.page.elements.titleError = $(".title-error.error");
    CustomerApp.page.elements.pricingPolicyCodeError = $(".pricingPolicyCode-error.error");
    CustomerApp.page.elements.pricingPolicyTypeError = $(".pricingPolicyType-error.error");
    CustomerApp.page.elements.offer = $("#offer");
    CustomerApp.page.elements.listPricePolicy = $("#listPricePolicy");


    $(() => {
        CustomerApp.page.commands.getInfoCustomer().then(() => {
            CustomerApp.page.commands.getAllCustomerGroup();
            CustomerApp.page.commands.getAllEmployee();
            CustomerApp.page.commands.getAllPaymentMethod();
            CustomerApp.page.commands.getDefaultPricingPolicy();
        });
    })

    CustomerApp.page.commands.updateCustomer = () => {
        let id = window.location.pathname.split('/')[3];

        newCustomer.fullName = CustomerApp.getValue(CustomerApp.page.elements.fullNameUp);
        newCustomer.customerCode = CustomerApp.getValue(CustomerApp.page.elements.customerCodeUp);
        newCustomer.groupId = CustomerApp.page.elements.customerGroupUp.find(":selected").val();
        newCustomer.phoneNumber = CustomerApp.getValue(CustomerApp.page.elements.phoneUp);
        newCustomer.email = CustomerApp.getValue(CustomerApp.page.elements.emailUp);
        newCustomer.birthday = new Date(CustomerApp.getValue(CustomerApp.page.elements.birthdayUp));
        newCustomer.gender = CustomerApp.page.elements.genderUp.find(":selected").val();
        newCustomer.fax = CustomerApp.getValue(CustomerApp.page.elements.faxUpdate);
        newCustomer.taxCode = CustomerApp.getValue(CustomerApp.page.elements.taxCodeUp);
        newCustomer.website = CustomerApp.getValue(CustomerApp.page.elements.websiteUp);
        customerStatus.status = CustomerApp.page.elements.statusUp.find(":selected").val();
        newCustomer.employeeId = CustomerApp.page.elements.employeeUp.find(":selected").val();
        newCustomer.description = CustomerApp.getValue(CustomerApp.page.elements.descriptionUp);
        // newCustomer.tags = CustomerApp.getValue(CustomerApp.page.elements.tagsUp);

        if ($("#customerGroupRadio").is(":checked")) {
            newCustomer.group = {
                id: CustomerApp.page.elements.customerGroupUp.find(":selected").val()
            };
        } else if ($("#customerRadio").is(":checked")) {
            newCustomer.defaultPaymentMethodId = CustomerApp.page.elements.dropdownPaymentMethod.find(":selected").val();
            newCustomer.discount = CustomerApp.getValue(CustomerApp.page.elements.defaultDiscountRate);
        }

        console.log(newCustomer)

        $.ajax({
            "headers": {
                "accept": "application/json",
                "content-type": "application/json"
            },
            "type": "PATCH",
            "url": origin + `/api/customers/${id}`,
            "data": JSON.stringify(newCustomer)
        })
            .done((data) => {
                CustomerApp.IziToast.showSuccessAlert("Cập nhật khách hàng thành công");

                setTimeout(() => {
                }, 2500)
                window.location.href = `/admin/customers/${data.id}`;

            })
            .fail((jqXHR) => {
                console.log(jqXHR);

                CustomerApp.IziToast.showErrorAlert(CustomerApp.AlertMessageVi.ERROR_400)
            })
    }


    CustomerApp.page.elements.btnUpdateCustomer.on("click", () => {
        CustomerApp.page.elements.frmUpdateCustomer.trigger("submit");
    })

    CustomerApp.page.elements.frmUpdateCustomer.validate({
        rules: {
            nameCreate: {
                required: true,
                maxlength: 255
            },
            codeCreate: {
                maxlength: 50
            },
            phoneCreate: {
                isValidPhone: true,
            },
            emailCreate: {
                isValidEmail: true
            },
            addressCreate: {
                required: true,
                maxlength: 255
            },
            faxCreate: {
                isValidFax: true,
            },
            taxCodeCreate: {
                maxlength: 255
            },
            websiteCreate: {
                maxlength: 255
            },
            debtTotal: {
                digits: true,
                range: [0, 99999999999]
            },
            spendTotal: {
                digits: true,
                range: [0, 99999999999]
            },
            descriptionCreate: {
                maxlength: 500
            }
        },
        messages: {
            nameCreate: {
                required: "Tên khách hàng không được để trống",
                maxlength: "Tên khách hàng không được vượt quá 255 ký tự"
            },
            codeCreate: {
                maxlength: 'Mã khách hàng không được vượt quá 50 ký tự'
            },
            addressCreate: {
                required: 'Địa chỉ không được trống',
                maxlength: 'Địa chỉ không được vượt quá 255 ký tự'
            },
            taxCodeCreate: {
                maxlength: 'Mã số thuế không được vượt quá 50 ký tự',
            },
            websiteCreate: {
                maxlength: 'Website không được vượt quá 255 ký tự'
            },
            debtTotal: {
                digits: "Chỉ được nhập số",
                range: 'Công nợ từ 0 đến 99,999,999,999 đồng'
            },
            spendTotal: {
                digits: "Chỉ được nhập số",
                range: 'Tổng chi tiêu từ 0 đến 99,999,999,999 đồng'
            },
            descriptionCreate: {
                maxlength: 'Mô tả không được vượt quá 500 ký tự'
            }
        },
        errorElement: 'label',
        errorPlacement: (error, element) => {
            error ? $(".error.hidden").addClass('show').removeClass('hidden') : '';
            error.appendTo(element.parent("div").parent("div").next("div"));
        },
        submitHandler: () => {
            CustomerApp.page.commands.updateCustomer();
        },
        invalidHandler: () => {
            CustomerApp.IziToast.showErrorAlert('Vui lòng nhập đúng thông tin')
        }
    });

    $.validator.addMethod("isValidPhone", function (value, element) {
        return this.optional(element) || /^$|[0-9]{8,15}$/i.test(value);
    }, "Số điện thoại không đúng định dạng");

    $.validator.addMethod("isValidEmail", function (value, element) {
        return this.optional(element) || /^$|[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/i.test(value);
    }, "Email không đúng định dạng");

    $.validator.addMethod("isValidFax", function (value, element) {
        return this.optional(element) || /^$|[0-9]{8,15}$/i.test(value);
    }, "Số fax không đúng định dạng");

    CustomerApp.page.commands.getAllEmployee = () => {
        return $.ajax({
            type: "GET",
            url: origin + "/api/employees"
        })
            .done((data) => {
                $.each(data, (i, item) => {
                    let str = `<option value="${item.id}">${item.fullName}</option>`;
                    $("#employeeUp").append(str);

                    customer.employee.id === item.id
                        ? $('#employeeUp option').prop('selected', true)
                        : '';
                });
            })
            .fail((jqXHR) => {
                console.log(jqXHR)

            })
    }

    CustomerApp.page.commands.getAllCustomerGroup = () => {
        return $.ajax({
            type: "GET",
            url: origin + "/api/customer_groups/",
        })
            .done((data) => {
                $.each(data, (i, item) => {
                    let str = `<option value="${item.id}">${item.title}</option>`;
                    $("#customerGroupUp").append(str);

                    item.id === customer.group.id
                        ? $('#customerGroupUp option').prop('selected', true)
                        : '';
                });
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    CustomerApp.page.commands.getInfoCustomer = () => {
        let id = window.location.pathname.split('/')[3];

        return $.ajax({
            type: "GET",
            url: origin + "/api/customers/" + id
        }).done((data) => {
            customer = {...data};

            CustomerApp.page.elements.fullNameUp.val(data.fullName ? data.fullName : '');
            CustomerApp.page.elements.customerCodeUp.val(data.customerCode ? data.customerCode : '');
            CustomerApp.page.elements.phoneUp.val(data.phoneNumber ? data.phoneNumber : '');
            CustomerApp.page.elements.emailUp.val(data.email ? data.email : '');
            CustomerApp.page.elements.birthdayUp.val(data.birthday ? data.birthday.split('T')[0] : '');
            CustomerApp.page.elements.faxUpdate.val(data.fax ? data.fax : '');
            CustomerApp.page.elements.taxCodeUp.val(data.taxCode ? data.taxCode : '');
            CustomerApp.page.elements.websiteUp.val(data.website ? data.website : '');
            CustomerApp.page.elements.statusUp.val(data.status ? data.status : '');
            CustomerApp.page.elements.descriptionUp.val(data.description ? data.description : '');
            CustomerApp.page.elements.tagsUp.val(data.tags ? data.tags : '');

            $("#genderUp").val(data.gender);
            $("#statusUp").val(data.status);
        })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    //start payment method
    CustomerApp.page.commands.getAllPaymentMethod = () => {
        return $.ajax({
            headers: {
                "accept": "application/json",
                "content-type": "application/json"
            },
            type: "GET",
            url: origin + "/api/payment_methods"
        })
            .done((data) => {
                data.forEach(item => {
                    let str = `<option value=${item.id} class="selectedPaymentMethod">${item.title}</option>`;

                    CustomerApp.page.elements.dropdownPaymentMethod.append(str);

                    // if (item.id === currentCustomerGroup.defaultPaymentMethodId) {
                    //     $('#dropdownPaymentMethod option').prop('selected', true)
                    // }
                });
                CustomerApp.page.commands.selectPaymentMethod();
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    CustomerApp.page.commands.selectPaymentMethod = () => {
        $(".selectedPaymentMethod").click(function () {
            currentCustomerGroup.defaultPaymentMethodId = $(this).val();
        })
    }
    //end payment method

    //start create default pricing policy
    CustomerApp.page.commands.showModalCreatePricePolicy = () => {
        CustomerApp.page.elements.modalCreatePricePolicy.modal("show");
    }
    //create price policy
    CustomerApp.page.commands.createPricePolicy = () => {
        let title = CustomerApp.getValue(CustomerApp.page.elements.titlePricePolicyCre);
        let pricingPolicyCode = CustomerApp.getValue(CustomerApp.page.elements.pricingPolicyCodeCre);

        let pricingPolicy = {
            title,
            pricingPolicyCode,
            pricingPolicyType: $('input[name="policyStyle"]:checked').val()
        }

        $.ajax({
            headers: {
                "accept": "application/json",
                "content-type": "application/json"
            },
            type: "POST",
            url: origin + "/api/pricing-policies",
            data: JSON.stringify(pricingPolicy)
        }).done((data) => {
            let str = `<a class="jss23775 selectPricePolicy" data-id="${data.id}" data-value="${data.title}">
                         ${data.title}
                       </a>`;

            CustomerApp.page.elements.listPricePolicy.prepend(str);
            CustomerApp.IziToast.showSuccessAlert("Thêm mới chính sách giá thành công")
            CustomerApp.page.elements.modalCreatePricePolicy.modal("hide");
            CustomerApp.page.elements.frmCreatePricePolicy[0].reset();
            CustomerApp.page.commands.selectPricePolicy();
        })
            .fail((jqXHR) => {
                console.log(jqXHR)
                let errors = jqXHR.responseJSON.errors;

                if (errors.title) {
                    CustomerApp.showErrorValidate(CustomerApp.page.elements.titleError, errors.title)
                }
                if (errors.pricingPolicyCode) {
                    CustomerApp.showErrorValidate(CustomerApp.page.elements.pricingPolicyCodeError, errors.pricingPolicyCode)
                }
                if (errors.pricingPolicyType) {
                    CustomerApp.showErrorValidate(CustomerApp.page.elements.pricingPolicyTypeError, errors.pricingPolicyType)
                }
            })
    }

    CustomerApp.page.commands.getDefaultPricingPolicy = () => {
        return $.ajax({
            headers: {
                "accept": "application/json",
                "content-type": "application/json"
            },
            type: "GET",
            url: origin + "/api/pricing-policies"
        })
            .done((data) => {
                data.forEach(item => {
                    let str = `<a class="jss23775 selectDefaultPricePolicy" data-id="${item.id}" data-value=${item.title}>
                                    ${item.title}
                                </a>`;

                    CustomerApp.page.elements.listPricePolicy.prepend(str);
                });
                CustomerApp.page.commands.selectDefaultPricePolicy();
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    CustomerApp.page.elements.btnCloseCreatePricePolicyModal.click(() => {
        CustomerApp.page.elements.frmCreatePricePolicy.validate().resetForm();
        CustomerApp.page.elements.frmCreatePricePolicy[0].reset();
        CustomerApp.page.elements.error.removeClass('show').addClass('hidden');
    })

    CustomerApp.page.elements.btnCreatePricePolicy.on("click", () => {
        CustomerApp.page.elements.frmCreatePricePolicy.trigger("submit");
    })

    CustomerApp.page.elements.frmCreatePricePolicy.validate({
        rules: {
            titlePricePolicyCre: {
                required: true,
                maxlength: 50,
            },
            pricingPolicyCodeCre: {
                required: true,
                maxlength: 50,
            },
            policyStyle: {
                required: true,
            }
        },
        messages: {
            titlePricePolicyCre: {
                required: "Tên chính sách giá không được để trống",
                maxlength: "Tên chính sách giá không được vượt quá 50 ký tự"
            },
            pricingPolicyCodeCre: {
                required: "Mã chính sách giá không được để trống",
                maxlength: "Mã chính sách giá không được vượt quá 50 ký tự"
            },
            policyStyle: {
                required: "Vui lòng chọn loại chính sách giá"
            }
        },
        showErrors: (error) => {
            if (error.titlePricePolicyCre) {
                CustomerApp.showErrorValidate(CustomerApp.page.elements.titleError, error.titlePricePolicyCre);
            }
            if (error.pricingPolicyCodeCre) {
                CustomerApp.showErrorValidate(CustomerApp.page.elements.pricingPolicyCodeError, error.pricingPolicyCodeCre);
            }
            if (error.policyStyle) {
                CustomerApp.showErrorValidate(CustomerApp.page.elements.pricingPolicyTypeError, error.policyStyle);
            }
        },
        submitHandler: () => {
            CustomerApp.page.commands.createPricePolicy();
        },
    });
    //end create default pricing policy

    CustomerApp.page.commands.selectDefaultPricePolicy = () => {
        $(".selectDefaultPricePolicy").on('click', function () {
            customer.defaultPricingPolicyId = $(this).data('id');
            let value = $(this).data('value');

            CustomerApp.page.elements.selectedPriceDefault.text(value);
            CustomerApp.page.elements.defaultPriceDropdown[0].classList.toggle("show")
        })
    }

    CustomerApp.page.commands.showDefaultPricingPolicyDropdown = () => {
        CustomerApp.page.elements.defaultPriceDropdown[0].classList.toggle('show');
    }

    $("#customerRadio, #customerGroupRadio").change(() => {
        ($("#customerRadio").is(":checked"))
            ? CustomerApp.page.elements.offer.show()
            : CustomerApp.page.elements.offer.hide();
    });

    $("#btnCloseUpdate").on('click', () => {
        let id = window.location.pathname.split('/')[3];
        window.location.href = `/admin/customers/${id}`
    });


</script>
</html>