<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi-VN" class="sapo-menu-expand sapo-menu-toggle-active">

<head>
    <title>Chi tiết khách hàng</title>

    <th:block th:replace="/admin/customer/layout/header"/>
    <link rel="stylesheet" href="/assets/admin/css/customer/info.css"/>
</head>
<body data-new-gr-c-s-check-loaded="14.1085.0">
<div id="root" style="overflow: auto;">
    <th:block th:replace="/layout/menu"/>

    <div class="jss64 jss40">
        <div class="jss638">
            <div class="jss641">
                <div class="jss644">
                    <a class="MuiTypography-root MuiLink-root MuiLink-underlineNone jss2114 MuiTypography-colorSecondary"
                       href="/admin/customers">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             style="width: 24px; height: 24px; margin-left: -9px; margin-right: 6px;">
                            <path d="M14.298 5.99 8.288 12l6.01 6.01 1.414-1.414L11.116 12l4.596-4.596-1.414-1.414Z"
                                  fill="currentColor"></path>
                        </svg>
                        <h6 class="MuiTypography-root MuiTypography-subtitle1">Quay lại danh sách khách hàng</h6>
                    </a>
                </div>
                <div class="jss2119">
                    <button id="btnShowModalDelete" class="gYRFmk">
                        <span class="jcEYKF">
                            Xóa khách hàng
                        </span>
                    </button>
                    <button id="btn-create-voucher" class="FmJDc">
                        <span class="sc-papXJ ffDJGn">Tạo phiếu thu/chi</span>
                        <svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M7 10l5 5 5-5z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div class="jss646 jss608">
            <div class="jss609">
                <div class="jss612">
                    <h6 class="MuiTypography-root jss613" id="fullName">
                    </h6>
                </div>
                <!--                <div class="jss649 jss612"></div>-->
            </div>
            <div class="jss654 jss614">
                <div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-3">
                    <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-8">
                        <div class="jss758 jss615">
                            <div class="jss759 jss622 jss617">
                                <div class="jss760 jss621">
                                    <div class="jss761" style="display: flex;">
                                        <h6 class="MuiTypography-root MuiTypography-subtitle1"
                                            style="padding-right: 16px;">
                                            Thông tin cá nhân
                                        </h6>
                                        <div id="status">
                                            <span id="statusText"></span>
                                        </div>
                                    </div>
                                    <a class="jss2101 goToUpdate jsseh237">
                                        Cập nhật
                                    </a>
                                </div>
                                <div class="jss762 jss623">
                                    <div class="MuiGrid-root MuiGrid-container">
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss624 jss625 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Ngày sinh
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Giới tính
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Số điện thoại
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Email
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Nhân viên phụ trách
                                                </h6>
                                                <h6 class="MuiTypography-root  jss626 jss628 MuiTypography-subtitle1">
                                                    Tags
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss624 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="dob"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="gender"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="phone"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="email"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="employee"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="tags"></span>
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss624 jss625 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Nhóm khách hàng
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Mã khách hàng
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Mã số thuế
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Website
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 jss628 MuiTypography-subtitle1">
                                                    Mô tả
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss624  MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <a id="customerGroup" class="jsseh237"></a>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="code"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="tax"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="website"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss626 MuiTypography-subtitle1">
                                                    : <span id="description"></span>
                                                </h6>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="jss622 jss618">
                                <div class="jss621">
                                    <h6 class="MuiTypography-root MuiTypography-subtitle1">
                                        Thông tin mua hàng
                                    </h6>
                                    <a class="jss627" href="#">
                                        Chi tiết
                                    </a>
                                </div>
                                <div class="jss623">
                                    <div class="MuiGrid-root MuiGrid-container">
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss2098 jss2099 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Tổng chi tiêu
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Tổng SL đơn hàng
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Ngày cuối cùng mua hàng
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss2098 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="spendTotal">0</span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="orderTotal">0</span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="lastDateOrder">---</span>
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss2098 jss2099 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Tổng SL sản phẩm đã mua
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Tổng SL sản phẩm hoàn trả
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Công nợ hiện tại
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3">
                                            <div class="MuiPaper-root jss2098 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="totalOrderProduct"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : 0
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="debtTotal">0</span>
                                                </h6>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-4">
                        <div class="jss2090">
                            <div class="jss2096 jss2093">
                                <div class="jss2095">
                                    <h6 class="MuiTypography-root MuiTypography-subtitle1">
                                        Thông tin gợi ý khi bán hàng
                                    </h6>
                                    <a class="jss2101 goToUpdate jsseh237">
                                        Cập nhật
                                    </a>
                                </div>
                                <div class="jss2097">
                                    <div class="MuiGrid-root MuiGrid-container">
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-7">
                                            <div class="MuiPaper-root jss2098 jss2099 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Chính sách giá mặc định
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Chiết khấu khách hàng
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 jss2102 MuiTypography-subtitle1">
                                                    Hình thức thanh toán mặc định
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-5">
                                            <div class="MuiPaper-root jss2098 MuiPaper-elevation1 MuiPaper-rounded">
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="defaultPricingPolicy"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="discount"></span>
                                                </h6>
                                                <h6 class="MuiTypography-root jss2100 MuiTypography-subtitle1">
                                                    : <span id="defaultPaymentMethod"></span>
                                                </h6>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--                            <div class="jss2467 jss2096 jss2094">-->
                            <!--                                <div class="jss2468 jss2095"><h6-->
                            <!--                                        class="MuiTypography-root MuiTypography-subtitle1">Thông tin tích điểm</h6>-->
                            <!--                                </div>-->
                            <!--                                <div class="jss2469 jss2097 jss2280">-->
                            <!--                                    <div class="jss2281">Khách hàng chưa được kích hoạt điểm và hạng thành viên-->
                            <!--                                    </div>-->
                            <!--                                    <button class="MuiButtonBase-root MuiButton-root MuiButton-outlined jss2282"-->
                            <!--                                            tabindex="0" type="button"><span-->
                            <!--                                            class="MuiButton-label">Kích hoạt ngay</span><span-->
                            <!--                                            class="MuiTouchRipple-root"></span></button>-->
                            <!--                                </div>-->
                            <!--                            </div>-->

                        </div>
                    </div>
                </div>
            </div>
            <div class="jss2103">
                <div class="jss2104">
                    <div class="gCRNBf">
                        <div id="scroller" class="fvZzuO jyZcwm1 jsseh238">
                            <div class="jyZcwm">
                                <button id="histories" class="fJFgex">Lịch sử mua hàng</button>
                                <button id="debts" class="fJFgex">Công nợ</button>
                                <button id="btnContacts" class="fJFgex">Liên hệ</button>
                                <button id="btnAddress" class="fJFgex">Địa chỉ</button>
                                <button id="notes" class="fJFgex">Ghi chú</button>
                                <button id="btnCustomerGroups" class="fACSJt">Nhóm khách hàng</button>
                            </div>
                            <div class="jyZcwm2 hidden">
                                <button id="btnShowModalCreateContact" class="kDDrLX">
                                    <svg class="MuiSvgIcon-root liFCEr" focusable="false" viewBox="0 0 24 24"
                                         aria-hidden="true">
                                        <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z">
                                        </path>
                                    </svg>
                                    <span class="jaWHHK">Thêm mới liên hệ</span>
                                </button>
                            </div>
                            <div class="jyZcwm2 hidden addressContainer">
                                <button id="btnShowModalCreateAddress" class="kDDrLX">
                                    <svg class="MuiSvgIcon-root liFCEr" focusable="false" viewBox="0 0 24 24"
                                         aria-hidden="true">
                                        <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z">
                                        </path>
                                    </svg>
                                    <span class="jaWHHK">Thêm mới địa chỉ</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <th:block th:replace="/admin/customer/layout/info_customer_tb::tbContact"/>

                    <div id="render_table">
                        <div id="customerGroupContainer" class="hidden">
                            <table id="tbCustomerGroup" class="jsseh238">
                                <thead>
                                <tr>
                                    <th class="col-3">Mã nhóm</th>
                                    <th class="col-3">Tên nhóm</th>
                                    <th class="col-3">Loại nhóm</th>
                                    <th class="col-3">Mô tả</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr class="row Bgekd">
                                    <td id="cgrCode" class="col-3"></td>
                                    <td id="cgrTitle" class="col-3"></td>
                                    <td id="cgrType" class="col-3"></td>
                                    <td id="cgrNote" class="col-3"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
<th:block th:replace="/admin/customer/modal_delete_customer"/>
<th:block th:replace="/admin/customer/modal/contact/modal_createContact"/>
<th:block th:replace="/admin/customer/modal/address/modal_createAddress"/>
<th:block th:replace="/admin/customer/layout/script"/>

<script src="/assets/admin/js/customer/customerHistory.js"></script>
<script src="/assets/admin/js/customer/customer_app.js"></script>
<script>

    let currentCustomer = {};
    let contactParam = {};
    let dataInput = {};

    CustomerApp.page.elements.fullName = $("#fullName");
    CustomerApp.page.elements.status = $("#status");
    CustomerApp.page.elements.statusText = $("#statusText");
    CustomerApp.page.elements.dob = $("#dob");
    CustomerApp.page.elements.gender = $("#gender");
    CustomerApp.page.elements.phone = $("#phone");
    CustomerApp.page.elements.email = $("#email");
    CustomerApp.page.elements.employee = $("#employee");
    CustomerApp.page.elements.tags = $("#tags");
    CustomerApp.page.elements.customerGroup = $("#customerGroup");
    CustomerApp.page.elements.code = $("#code");
    CustomerApp.page.elements.tax = $("#tax");
    CustomerApp.page.elements.website = $("#website");
    CustomerApp.page.elements.description = $("#description");
    CustomerApp.page.elements.totalOrderProduct = $("#totalOrderProduct");
    CustomerApp.page.elements.defaultPricingPolicy = $("#defaultPricingPolicy");
    CustomerApp.page.elements.discount = $("#discount");
    CustomerApp.page.elements.defaultPaymentMethod = $("#defaultPaymentMethod");

    CustomerApp.page.elements.goToUpdate = $(".goToUpdate");

    CustomerApp.page.elements.btnShowModalDelete = $("#btnShowModalDelete");
    CustomerApp.page.elements.btnDeleteCustomer = $("#btnDeleteCustomer");
    CustomerApp.page.elements.btnShowModalCreateContact = $("#btnShowModalCreateContact");

    CustomerApp.page.elements.modalDeleteCustomer = $('#modal_delete_customer');
    CustomerApp.page.elements.modalCreateContact = $('#modalCreateContact');

    CustomerApp.page.elements.confirmText = $("#confirmText");

    CustomerApp.page.elements.btnCustomerGroups = $("#btnCustomerGroups");

    CustomerApp.page.elements.cgrCode = $("#cgrCode");

    //start contact
    CustomerApp.page.elements.btnContacts = $("#btnContacts");

    CustomerApp.page.elements.tbContact = $("#tbContact");

    CustomerApp.page.dialogs.elements.fullNameCtCre = $("#fullNameCtCre");
    CustomerApp.page.dialogs.elements.phoneCtCre = $("#phoneCtCre");
    CustomerApp.page.dialogs.elements.emailCtCre = $("#emailCtCre");
    CustomerApp.page.dialogs.elements.faxCtCre = $("#faxCtCre");
    CustomerApp.page.dialogs.elements.positionCtCre = $("#positionCtCre");
    CustomerApp.page.dialogs.elements.departmentCtCre = $("#departmentCtCre");
    CustomerApp.page.dialogs.elements.noteCtCre = $("#noteCtCre");

    CustomerApp.page.dialogs.elements.btnCreateContact = $("#btnCreateContact");
    CustomerApp.page.elements.modalCreateAddress = $("#modalCreateAddress");
    //end contact

    //start address
    CustomerApp.page.elements.btnAddress = $("#btnAddress");
    CustomerApp.page.elements.districtUpdate = $("#districtUpdate");
    CustomerApp.page.elements.provinceUpdate = $("#provinceUpdate");
    CustomerApp.page.elements.wardUpdate = $("#wardUpdate");
    CustomerApp.page.elements.district = $("#district");
    CustomerApp.page.elements.province = $("#province");
    CustomerApp.page.elements.ward = $("#ward");
    //end address

    //start contact
    CustomerApp.page.elements.btnContacts.click(() => {
        CustomerApp.page.commands.drawContactDataTable();
    })

    CustomerApp.page.commands.drawContactDataTable = () => {
        let id = +window.location.pathname.split('/')[3];

        CustomerApp.page.elements.tbContact.DataTable({
            dom: '<"top">rt<"bottom"lifp><"clear">',
            processing: true,
            serverSide: true,
            ajax: {
                type: 'POST',
                url: origin + `/api/customers/${id}/contacts/pagination`,
                accept: 'application/json',
                contentType: 'application/json',
                data: function (d) {
                    console.log(d)
                    return JSON.stringify(d);
                }
            },
            language: CustomerApp.dataTableDetails.language,
            lengthMenu: [
                [20, 50, 100],
                ["20", "50", "100"]
            ],
            column: [
                {
                    data: 'fullName',
                    ordering: false
                },
                {
                    data: 'phoneNumber',
                    ordering: false
                },
                {
                    data: 'email',
                    ordering: false
                },
                {
                    data: 'position',
                    ordering: false
                },
                {
                    data: 'department',
                    ordering: false
                }
            ],
            searching: false
        })
    }

    CustomerApp.page.dialogs.elements.btnCreateContact.click(() => {
        CustomerApp.page.commands.createContact();
    })

    CustomerApp.page.commands.createContact = () => {
        let id = +window.location.pathname.split('/')[3];

        contactParam.fullName = CustomerApp.getValue(CustomerApp.page.dialogs.elements.fullNameCtCre);
        contactParam.phoneNumber = CustomerApp.getValue(CustomerApp.page.dialogs.elements.phoneCtCre);
        contactParam.email = CustomerApp.getValue(CustomerApp.page.dialogs.elements.emailCtCre);
        contactParam.fax = CustomerApp.getValue(CustomerApp.page.dialogs.elements.faxCtCre);
        contactParam.position = CustomerApp.getValue(CustomerApp.page.dialogs.elements.positionCtCre);
        contactParam.department = CustomerApp.getValue(CustomerApp.page.dialogs.elements.departmentCtCre);
        contactParam.note = CustomerApp.getValue(CustomerApp.page.dialogs.elements.noteCtCre);

        $.ajax({
            headers: {
                "accept": "application/json",
                "content-type": "application/json"
            },
            type: "POST",
            url: origin + `/api/customers/${id}/contacts`,
            data: JSON.stringify(contactParam)
        })
            .done((data) => {
                console.log(data)
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    CustomerApp.page.commands.getCustomerInfo = () => {
        let id = +window.location.pathname.split('/')[3];

        return $.ajax({
            type: "GET",
            url: origin + `/api/customers/${id}`,
        })
            .done((data) => {
                console.log(data)
                currentCustomer = {...data}
                CustomerApp.page.elements.fullName.text(CustomerApp.page.commands.getValue(data.fullName));

                if (data.status === "AVAILABLE") {
                    CustomerApp.page.elements.status.addClass("hlxtkG");
                    CustomerApp.page.elements.statusText.text('Đang giao dịch');
                    CustomerApp.page.elements.statusText.addClass('gIZkwA')
                } else {
                    CustomerApp.page.elements.status.addClass("csJERM");
                    CustomerApp.page.elements.statusText.text('Ngừng giao dịch');
                    CustomerApp.page.elements.status.addClass('NccQLIN');
                }

                data.birthday
                    ? CustomerApp.page.elements.dob.text(CustomerApp.formatDatePattern(CustomerApp.page.commands.getValue(data.birthday)))
                    : CustomerApp.page.elements.dob.text('---');

                CustomerApp.page.elements.gender.text(CustomerApp.page.commands.getValue(data.gender));
                CustomerApp.page.elements.phone.text(CustomerApp.page.commands.getValue(data.phoneNumber));
                CustomerApp.page.elements.email.text(CustomerApp.page.commands.getValue(data.email));
                CustomerApp.page.elements.employee.text(CustomerApp.page.commands.getValue(data.employee.fullName));

                data.tags.length > 0
                    ? CustomerApp.page.elements.tags.text(data.tags)
                    : CustomerApp.page.elements.tags.text('---');

                CustomerApp.page.elements.customerGroup.text(CustomerApp.page.commands.getValue(data.group.title));
                CustomerApp.page.elements.code.text(CustomerApp.page.commands.getValue(data.customerCode));
                CustomerApp.page.elements.tax.text(CustomerApp.page.commands.getValue(data.taxCode));
                CustomerApp.page.elements.website.text(CustomerApp.page.commands.getValue(data.website));
                CustomerApp.page.elements.description.text(CustomerApp.page.commands.getValue(data.description));
                CustomerApp.page.elements.totalOrderProduct.text(CustomerApp.page.commands.getValue(data.quantityProductOrder));
                CustomerApp.page.elements.defaultPricingPolicy.text(CustomerApp.page.commands.getValue(data.group.pricingPolicy.title));
                CustomerApp.page.elements.discount.text(CustomerApp.page.commands.getValue(data.group.defaultDiscountRate));
                CustomerApp.page.elements.defaultPaymentMethod.text(CustomerApp.page.commands.getValue(data.group.paymentMethod.title));
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }
    //end contact

    $(() => {
        CustomerApp.page.commands.getCustomerInfo().then(() => {
            CustomerApp.page.commands.deleteCustomer();

            CustomerApp.page.commands.showCustomerGroup();
        });
    })

    CustomerApp.page.commands.showCustomerGroup = () => {
        CustomerApp.page.elements.btnCustomerGroups.click(() => {

            $("#customerGroupContainer").addClass('show').removeClass('hidden');
            let id = currentCustomer.id;

            $.ajax({
                type: "GET",
                url: origin + `/api/customer_groups/${id}/customer`
            })
                .done((data) => {
                    console.log(data)
                    let groupId = data.id;
                    CustomerApp.page.elements.cgrCode.text(`${data.cusGrpCode}`)
                    $("#cgrTitle").text(`${data.title}`)
                    $("#cgrType").text(`${data.type}`)
                    $("#cgrNote").text(`${data.note || '---'}`)

                    CustomerApp.page.elements.cgrCode.click(() => {
                        window.open(`/admin/customer_groups/${groupId}`,
                            '_blank');
                    })
                })
                .fail((jqXHR) => {
                    console.log(jqXHR)
                })
        })
    }

    CustomerApp.page.commands.deleteCustomer = () => {
        CustomerApp.page.elements.btnDeleteCustomer.click(() => {
            let id = currentCustomer.id;
            $.ajax({
                headers: {
                    "accept": "application/json",
                    "content-type": "application/json"
                },
                type: "DELETE",
                url: origin + "/api/customers/" + id
            })
                .done(() => {
                    CustomerApp.IziToast.showSuccessAlert("Xoá khách hàng thành công");
                    CustomerApp.page.elements.modalDeleteCustomer.modal('hide');

                    setTimeout(() => {
                        window.location.href = "/admin/customers";
                    }, 2500)
                })
                .fail((jqXHR) => {
                    console.log(jqXHR)
                })
        })
    }

    CustomerApp.page.elements.btnShowModalDelete.click(() => {
        CustomerApp.page.elements.modalDeleteCustomer.modal('show');
        CustomerApp.page.elements.confirmText.text(`Bạn có chắc chắn muốn xóa khách hàng ${currentCustomer.fullName}? Thao tác này không thể khôi phục.`)
    });

    CustomerApp.page.elements.customerGroup.click(() => {
        window.open(`/admin/customer_groups/${currentCustomer.group.id}`, '_blank');
    })

    CustomerApp.page.elements.goToUpdate.click(() => {
        window.location.href = `/admin/customers/${currentCustomer.id}/edit`;
    })

    CustomerApp.page.commands.getValue = (value) => {
        return value || '---';
    }

    //start modal create contact
    CustomerApp.page.elements.btnShowModalCreateContact.click(() => {
        CustomerApp.page.elements.modalCreateContact.modal('show');
    })
    //end modal create contact

    //start address
    CustomerApp.page.elements.btnAddress.click(() => {
        $('.addressContainer').removeClass('hidden').addClass('show');
    })

    $("#btnShowModalCreateAddress").click(() => {
        CustomerApp.page.elements.modalCreateAddress.modal('show');
    })

    CustomerApp.getAllProvinces();
    //end address

    /*
    // liên hệ
    $('#contacts').on('click', () => {

        removeTable();
        showContacts();

        $('#contacts').css({
            'color': '#4a8aff',
            'border-bottom': '2px solid rgb(0, 136, 255)'
        });
    });

    //địa chỉ
    $('#addresses').on('click', () => {
        removeTable();
        showAddress();

        $('#addresses').css({
            'color': '#4a8aff',
            'border-bottom': '2px solid rgb(0, 136, 255)'
        });
    });

    // mô tả
    $('#notes').on('click', () => {
        removeTable();
        showNotes();
        $('#notes').css({
            'color': '#4a8aff',
            'border-bottom': '2px solid rgb(0, 136, 255)'
        });
    });

    // nhóm khách hàng
    $('#btnCustomerGroups').on('click', () => {
        removeTable();
        showCusGroup();
        $('#customer_groups').css({
            'color': '#4a8aff',
            'border-bottom': '2px solid rgb(0, 136, 255)'
        });
    })


    // remove table
    removeTableContacts = () => {
        $('#tbContacts').DataTable().destroy();
        $('#tbContacts').remove();

        deleteEventModelShow();
    }
    removeTableAddress = () => {
        $('#tbAddress').DataTable().destroy();
        $('#tbAddress').remove();

        deleteEventModelShow();
    }
    removeTableNotes = () => {
        $('#tbNotes').DataTable().destroy();
        $('#tbNotes').remove();

        deleteEventModelShow();
    }
    removeTableCusGroup = () => {
        $('#tbCusGroup').DataTable().destroy();
        $('#tbCusGroup').remove();

        deleteEventModelShow();

    }

    removeTable = () => {
        removeTableAddress();
        removeTableContacts();
        removeTableNotes();
        removeTableCusGroup();
    }

    // Liên hệ
    showContacts = () => {

        $('#render_table').append(`
                            <table id="tbContacts" class="table table-hover" style="width:100%">
                                <thead style="background-color: #f4f6f8; height: 55px">
                                    <th class="align-middle" >Tên liên hệ</th>
                                    <th class="align-middle">Số điện thoại</th>
                                    <th class="align-middle" >Email</th>
                                    <th class="align-middle" >Chức vụ</th>
                                    <th class="align-middle" >Bộ phận</th>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>`);

        $('#tbContacts').DataTable({
            language: CustomerApp.dataTableDetails.language,
            ajax: {
                url: origin + `/api/customers/${customer.id}/address`,
                type: 'GET',
                contentType: 'application/json'
            },
            "lengthChange": false,
            searching: false,
            destroy: false,
            sortable: false,
            "ordering": false,
            "aoColumns": [{
                "bVisible": false
            }
            ],
            search: false,
            columns: [
                {data: 'addresses[0].fullName'},
                {data: 'addresses[0].phoneNumber'},
                {data: 'addresses[0].email'},
                {
                    "data": "position_level", // can be null or undefined
                    "defaultContent": ""
                },
                {
                    "data": "parts", // can be null or undefined
                    "defaultContent": ""
                },
            ]
        })
    }

    // // địa chỉ
    showAddress = () => {
        $('#render_table').append(`
                                <table id="tbAddress" class="table table-hover" style="width:100%">
                                    <thead style="background-color: #f4f6f8; height: 55px">
                                    <th class="align-middle" >Số điện thoại</th>
                                    <th class="align-middle">Địa chỉ</th>
                                    <th class="align-middle" >Phường xã</th>
                                    <th class="align-middle" >Quận huyện</th>
                                    <th class="align-middle" >Tỉnh thành phố</th>
                                    <th class="align-middle" >Mã bưu điện</th>
                                    <th class="align-middle" >Email</th>

                                    </thead>
                                    <tbody>

                                    </tbody>
                                </table>`);
        $("#tbAddress").DataTable({
            language:
                {
                    "processing": "Đang xử lý...",
                    "aria": {
                        "sortAscending": ": Sắp xếp thứ tự tăng dần",
                        "sortDescending": ": Sắp xếp thứ tự giảm dần"
                    },
                    "autoFill": {
                        "cancel": "Hủy",
                        "fill": "Điền tất cả ô với <i>%d<\/i>",
                        "fillHorizontal": "Điền theo hàng ngang",
                        "fillVertical": "Điền theo hàng dọc"
                    },
                    "buttons": {
                        "collection": "Chọn lọc <span class=\"ui-button-icon-primary ui-icon ui-icon-triangle-1-s\"><\/span>",
                        "colvis": "Hiển thị theo cột",
                        "colvisRestore": "Khôi phục hiển thị",
                        "copy": "Sao chép",
                        "copyKeys": "Nhấn Ctrl hoặc u2318 + C để sao chép bảng dữ liệu vào clipboard.<br \/><br \/>Để hủy, click vào thông báo này hoặc nhấn ESC",
                        "copySuccess": {
                            "1": "Đã sao chép 1 dòng dữ liệu vào clipboard",
                            "_": "Đã sao chép %d dòng vào clipboard"
                        },
                        "copyTitle": "Sao chép vào clipboard",
                        "pageLength": {
                            "-1": "Xem tất cả các dòng",
                            "_": "Hiển thị %d dòng",
                            "1": "Hiển thị 1 dòng"
                        },
                        "print": "In ấn",
                        "createState": "Tạo trạng thái",
                        "csv": "CSV",
                        "excel": "Excel",
                        "pdf": "PDF",
                        "removeAllStates": "Xóa hết trạng thái",
                        "removeState": "Xóa",
                        "renameState": "Đổi tên",
                        "savedStates": "Trạng thái đã lưu",
                        "stateRestore": "Trạng thái %d",
                        "updateState": "Cập nhật"
                    },
                    "select": {
                        "cells": {
                            "1": "1 ô đang được chọn",
                            "_": "%d ô đang được chọn"
                        },
                        "columns": {
                            "1": "1 cột đang được chọn",
                            "_": "%d cột đang được được chọn"
                        },
                        "rows": {
                            "1": "1 dòng đang được chọn",
                            "_": "%d dòng đang được chọn"
                        }
                    },
                    "searchBuilder": {
                        "title": {
                            "_": "Thiết lập tìm kiếm (%d)",
                            "0": "Thiết lập tìm kiếm"
                        },
                        "button": {
                            "0": "Thiết lập tìm kiếm",
                            "_": "Thiết lập tìm kiếm (%d)"
                        },
                        "value": "Giá trị",
                        "clearAll": "Xóa hết",
                        "condition": "Điều kiện",
                        "conditions": {
                            "date": {
                                "after": "Sau",
                                "before": "Trước",
                                "between": "Nằm giữa",
                                "empty": "Rỗng",
                                "equals": "Bằng với",
                                "not": "Không phải",
                                "notBetween": "Không nằm giữa",
                                "notEmpty": "Không rỗng"
                            },
                            "number": {
                                "between": "Nằm giữa",
                                "empty": "Rỗng",
                                "equals": "Bằng với",
                                "gt": "Lớn hơn",
                                "gte": "Lớn hơn hoặc bằng",
                                "lt": "Nhỏ hơn",
                                "lte": "Nhỏ hơn hoặc bằng",
                                "not": "Không phải",
                                "notBetween": "Không nằm giữa",
                                "notEmpty": "Không rỗng"
                            },
                            "string": {
                                "contains": "Chứa",
                                "empty": "Rỗng",
                                "endsWith": "Kết thúc bằng",
                                "equals": "Bằng",
                                "not": "Không phải",
                                "notEmpty": "Không rỗng",
                                "startsWith": "Bắt đầu với",
                                "notContains": "Không chứa",
                                "notEndsWith": "Không kết thúc với",
                                "notStartsWith": "Không bắt đầu với"
                            },
                            "array": {
                                "equals": "Bằng",
                                "empty": "Trống",
                                "contains": "Chứa",
                                "not": "Không",
                                "notEmpty": "Không được rỗng",
                                "without": "không chứa"
                            }
                        },
                        "logicAnd": "Và",
                        "logicOr": "Hoặc",
                        "add": "Thêm điều kiện",
                        "data": "Dữ liệu",
                        "deleteTitle": "Xóa quy tắc lọc",
                        "leftTitle": "Giảm thụt lề",
                        "rightTitle": "Tăng thụt lề"
                    },
                    "searchPanes": {
                        "countFiltered": "{shown} ({total})",
                        "emptyPanes": "Không có phần tìm kiếm",
                        "clearMessage": "Xóa hết",
                        "loadMessage": "Đang load phần tìm kiếm",
                        "collapse": {
                            "0": "Phần tìm kiếm",
                            "_": "Phần tìm kiếm (%d)"
                        },
                        "title": "Bộ lọc đang hoạt động - %d",
                        "count": "{total}",
                        "collapseMessage": "Thu gọn tất cả",
                        "showMessage": "Hiện tất cả"
                    },
                    "datetime": {
                        "hours": "Giờ",
                        "minutes": "Phút",
                        "next": "Sau",
                        "previous": "Trước",
                        "seconds": "Giây",
                        "amPm": [
                            "am",
                            "pm"
                        ],
                        "unknown": "-",
                        "weekdays": [
                            "Chủ nhật"
                        ],
                        "months": [
                            "Tháng Một",
                            "Tháng Hai",
                            "Tháng Ba",
                            "Tháng Tư",
                            "Tháng Năm",
                            "Tháng Sáu",
                            "Tháng Bảy",
                            "Tháng Tám",
                            "Tháng Chín",
                            "Tháng Mười",
                            "Tháng Mười Một",
                            "Tháng Mười Hai"
                        ]
                    },
                    "emptyTable": "Không có dữ liệu",
                    "info": "Hiển thị _START_ tới _END_ của _TOTAL_ dữ liệu",
                    "infoEmpty": "Hiển thị 0 tới 0 của 0 dữ liệu",
                    "lengthMenu": "Hiển thị _MENU_ dữ liệu",
                    "loadingRecords": "Đang tải...",
                    "paginate": {
                        "first": "Đầu tiên",
                        "last": "Cuối cùng",
                        "next": "Sau",
                        "previous": "Trước"
                    },
                    "search": "Tìm kiếm:",
                    "zeroRecords": "Không tìm thấy kết quả",
                    "decimal": ",",
                    "editor": {
                        "close": "Đóng",
                        "create": {
                            "button": "Thêm",
                            "submit": "Thêm",
                            "title": "Thêm mục mới"
                        },
                        "edit": {
                            "button": "Sửa",
                            "submit": "Cập nhật",
                            "title": "Sửa mục"
                        },
                        "error": {
                            "system": "Đã xảy ra lỗi hệ thống (&lt;a target=\"\\\" rel=\"nofollow\" href=\"\\\"&gt;Thêm thông tin&lt;\/a&gt;)."
                        },
                        "multi": {
                            "info": "Các mục đã chọn chứa các giá trị khác nhau cho đầu vào này. Để chỉnh sửa và đặt tất cả các mục cho đầu vào này thành cùng một giá trị, hãy nhấp hoặc nhấn vào đây, nếu không chúng sẽ giữ lại các giá trị riêng lẻ của chúng.",
                            "noMulti": "Đầu vào này có thể được chỉnh sửa riêng lẻ, nhưng không phải là một phần của một nhóm.",
                            "restore": "Hoàn tác thay đổi",
                            "title": "Nhiều giá trị"
                        },
                        "remove": {
                            "button": "Xóa",
                            "confirm": {
                                "_": "Bạn có chắc chắn muốn xóa %d hàng không?",
                                "1": "Bạn có chắc chắn muốn xóa 1 hàng không?"
                            },
                            "submit": "Xóa",
                            "title": "Xóa"
                        }
                    },
                    "infoFiltered": "(được lọc từ _MAX_ dữ liệu)",
                    "searchPlaceholder": "Nhập tìm kiếm...",
                    "stateRestore": {
                        "creationModal": {
                            "button": "Thêm",
                            "columns": {
                                "search": "Tìm kiếm cột",
                                "visible": "Khả năng hiển thị cột"
                            },
                            "name": "Tên:",
                            "order": "Sắp xếp",
                            "paging": "Phân trang",
                            "scroller": "Cuộn vị trí",
                            "search": "Tìm kiếm",
                            "searchBuilder": "Trình tạo tìm kiếm",
                            "select": "Chọn",
                            "title": "Thêm trạng thái",
                            "toggleLabel": "Bao gồm:"
                        },
                        "duplicateError": "Trạng thái có tên này đã tồn tại.",
                        "emptyError": "Tên không được để trống.",
                        "emptyStates": "Không có trạng thái đã lưu",
                        "removeConfirm": "Bạn có chắc chắn muốn xóa %s không?",
                        "removeError": "Không xóa được trạng thái.",
                        "removeJoiner": "và",
                        "removeSubmit": "Xóa",
                        "removeTitle": "Xóa trạng thái",
                        "renameButton": "Đổi tên",
                        "renameLabel": "Tên mới cho %s:",
                        "renameTitle": "Đổi tên trạng thái"
                    },
                    "infoThousands": ".",
                    "thousands": "."
                },
            // chuyển tiếng việt cho datatable
            ajax: {
                url: origin + `/api/customers/${customer.id}/address`,
                type: 'GET',
                contentType: 'application/json'
            },
            "lengthChange": false,
            "ordering": false,
            searching: false,
            destroy: false,
            "aoColumns": [{
                "bVisible": false
            }
            ],
            search: false,
            columns: [
                {
                    "data": "phoneNumber",
                    "defaultContent": ""
                },
                {
                    "data": "addresses[0].line1",
                    "defaultContent": ""
                },
                {data: 'addresses[0].wardName'},
                {data: 'addresses[0].districtName'},
                {data: 'addresses[0].provinceName'},
                {
                    "data": "addresses[0].zipCode",
                    "defaultContent": ""
                },
                {
                    "data": "email",
                    "defaultContent": ""
                },
            ]

        });
    }

    // Ghi chú
    showNotes = () => {
        $('#render_table').append(`
                            <table id="tbNotes" class="table table-hover" style="width:100%">
                                <thead style="background-color: #f4f6f8; height: 55px">

                                <th class="align-middle" >Ghi chú</th>
                                <th class="align-middle">Người thêm</th>
                                <th class="align-middle" >Thời gian</th>

                                </thead>
                                <tbody>
                                </tbody>
                            </table>`);
        $('#tbNotes').DataTable({
            language:
                {
                    "processing": "Đang xử lý...",
                    "aria": {
                        "sortAscending": ": Sắp xếp thứ tự tăng dần",
                        "sortDescending": ": Sắp xếp thứ tự giảm dần"
                    },
                    "autoFill": {
                        "cancel": "Hủy",
                        "fill": "Điền tất cả ô với <i>%d<\/i>",
                        "fillHorizontal": "Điền theo hàng ngang",
                        "fillVertical": "Điền theo hàng dọc"
                    },
                    "buttons": {
                        "collection": "Chọn lọc <span class=\"ui-button-icon-primary ui-icon ui-icon-triangle-1-s\"><\/span>",
                        "colvis": "Hiển thị theo cột",
                        "colvisRestore": "Khôi phục hiển thị",
                        "copy": "Sao chép",
                        "copyKeys": "Nhấn Ctrl hoặc u2318 + C để sao chép bảng dữ liệu vào clipboard.<br \/><br \/>Để hủy, click vào thông báo này hoặc nhấn ESC",
                        "copySuccess": {
                            "1": "Đã sao chép 1 dòng dữ liệu vào clipboard",
                            "_": "Đã sao chép %d dòng vào clipboard"
                        },
                        "copyTitle": "Sao chép vào clipboard",
                        "pageLength": {
                            "-1": "Xem tất cả các dòng",
                            "_": "Hiển thị %d dòng",
                            "1": "Hiển thị 1 dòng"
                        },
                        "print": "In ấn",
                        "createState": "Tạo trạng thái",
                        "csv": "CSV",
                        "excel": "Excel",
                        "pdf": "PDF",
                        "removeAllStates": "Xóa hết trạng thái",
                        "removeState": "Xóa",
                        "renameState": "Đổi tên",
                        "savedStates": "Trạng thái đã lưu",
                        "stateRestore": "Trạng thái %d",
                        "updateState": "Cập nhật"
                    },
                    "select": {
                        "cells": {
                            "1": "1 ô đang được chọn",
                            "_": "%d ô đang được chọn"
                        },
                        "columns": {
                            "1": "1 cột đang được chọn",
                            "_": "%d cột đang được được chọn"
                        },
                        "rows": {
                            "1": "1 dòng đang được chọn",
                            "_": "%d dòng đang được chọn"
                        }
                    },
                    "searchBuilder": {
                        "title": {
                            "_": "Thiết lập tìm kiếm (%d)",
                            "0": "Thiết lập tìm kiếm"
                        },
                        "button": {
                            "0": "Thiết lập tìm kiếm",
                            "_": "Thiết lập tìm kiếm (%d)"
                        },
                        "value": "Giá trị",
                        "clearAll": "Xóa hết",
                        "condition": "Điều kiện",
                        "conditions": {
                            "date": {
                                "after": "Sau",
                                "before": "Trước",
                                "between": "Nằm giữa",
                                "empty": "Rỗng",
                                "equals": "Bằng với",
                                "not": "Không phải",
                                "notBetween": "Không nằm giữa",
                                "notEmpty": "Không rỗng"
                            },
                            "number": {
                                "between": "Nằm giữa",
                                "empty": "Rỗng",
                                "equals": "Bằng với",
                                "gt": "Lớn hơn",
                                "gte": "Lớn hơn hoặc bằng",
                                "lt": "Nhỏ hơn",
                                "lte": "Nhỏ hơn hoặc bằng",
                                "not": "Không phải",
                                "notBetween": "Không nằm giữa",
                                "notEmpty": "Không rỗng"
                            },
                            "string": {
                                "contains": "Chứa",
                                "empty": "Rỗng",
                                "endsWith": "Kết thúc bằng",
                                "equals": "Bằng",
                                "not": "Không phải",
                                "notEmpty": "Không rỗng",
                                "startsWith": "Bắt đầu với",
                                "notContains": "Không chứa",
                                "notEndsWith": "Không kết thúc với",
                                "notStartsWith": "Không bắt đầu với"
                            },
                            "array": {
                                "equals": "Bằng",
                                "empty": "Trống",
                                "contains": "Chứa",
                                "not": "Không",
                                "notEmpty": "Không được rỗng",
                                "without": "không chứa"
                            }
                        },
                        "logicAnd": "Và",
                        "logicOr": "Hoặc",
                        "add": "Thêm điều kiện",
                        "data": "Dữ liệu",
                        "deleteTitle": "Xóa quy tắc lọc",
                        "leftTitle": "Giảm thụt lề",
                        "rightTitle": "Tăng thụt lề"
                    },
                    "searchPanes": {
                        "countFiltered": "{shown} ({total})",
                        "emptyPanes": "Không có phần tìm kiếm",
                        "clearMessage": "Xóa hết",
                        "loadMessage": "Đang load phần tìm kiếm",
                        "collapse": {
                            "0": "Phần tìm kiếm",
                            "_": "Phần tìm kiếm (%d)"
                        },
                        "title": "Bộ lọc đang hoạt động - %d",
                        "count": "{total}",
                        "collapseMessage": "Thu gọn tất cả",
                        "showMessage": "Hiện tất cả"
                    },
                    "datetime": {
                        "hours": "Giờ",
                        "minutes": "Phút",
                        "next": "Sau",
                        "previous": "Trước",
                        "seconds": "Giây",
                        "amPm": [
                            "am",
                            "pm"
                        ],
                        "unknown": "-",
                        "weekdays": [
                            "Chủ nhật"
                        ],
                        "months": [
                            "Tháng Một",
                            "Tháng Hai",
                            "Tháng Ba",
                            "Tháng Tư",
                            "Tháng Năm",
                            "Tháng Sáu",
                            "Tháng Bảy",
                            "Tháng Tám",
                            "Tháng Chín",
                            "Tháng Mười",
                            "Tháng Mười Một",
                            "Tháng Mười Hai"
                        ]
                    },
                    "emptyTable": "Không có dữ liệu",
                    "info": "Hiển thị _START_ tới _END_ của _TOTAL_ dữ liệu",
                    "infoEmpty": "Hiển thị 0 tới 0 của 0 dữ liệu",
                    "lengthMenu": "Hiển thị _MENU_ dữ liệu",
                    "loadingRecords": "Đang tải...",
                    "paginate": {
                        "first": "Đầu tiên",
                        "last": "Cuối cùng",
                        "next": "Sau",
                        "previous": "Trước"
                    },
                    "search": "Tìm kiếm:",
                    "zeroRecords": "Không tìm thấy kết quả",
                    "decimal": ",",
                    "editor": {
                        "close": "Đóng",
                        "create": {
                            "button": "Thêm",
                            "submit": "Thêm",
                            "title": "Thêm mục mới"
                        },
                        "edit": {
                            "button": "Sửa",
                            "submit": "Cập nhật",
                            "title": "Sửa mục"
                        },
                        "error": {
                            "system": "Đã xảy ra lỗi hệ thống (&lt;a target=\"\\\" rel=\"nofollow\" href=\"\\\"&gt;Thêm thông tin&lt;\/a&gt;)."
                        },
                        "multi": {
                            "info": "Các mục đã chọn chứa các giá trị khác nhau cho đầu vào này. Để chỉnh sửa và đặt tất cả các mục cho đầu vào này thành cùng một giá trị, hãy nhấp hoặc nhấn vào đây, nếu không chúng sẽ giữ lại các giá trị riêng lẻ của chúng.",
                            "noMulti": "Đầu vào này có thể được chỉnh sửa riêng lẻ, nhưng không phải là một phần của một nhóm.",
                            "restore": "Hoàn tác thay đổi",
                            "title": "Nhiều giá trị"
                        },
                        "remove": {
                            "button": "Xóa",
                            "confirm": {
                                "_": "Bạn có chắc chắn muốn xóa %d hàng không?",
                                "1": "Bạn có chắc chắn muốn xóa 1 hàng không?"
                            },
                            "submit": "Xóa",
                            "title": "Xóa"
                        }
                    },
                    "infoFiltered": "(được lọc từ _MAX_ dữ liệu)",
                    "searchPlaceholder": "Nhập tìm kiếm...",
                    "stateRestore": {
                        "creationModal": {
                            "button": "Thêm",
                            "columns": {
                                "search": "Tìm kiếm cột",
                                "visible": "Khả năng hiển thị cột"
                            },
                            "name": "Tên:",
                            "order": "Sắp xếp",
                            "paging": "Phân trang",
                            "scroller": "Cuộn vị trí",
                            "search": "Tìm kiếm",
                            "searchBuilder": "Trình tạo tìm kiếm",
                            "select": "Chọn",
                            "title": "Thêm trạng thái",
                            "toggleLabel": "Bao gồm:"
                        },
                        "duplicateError": "Trạng thái có tên này đã tồn tại.",
                        "emptyError": "Tên không được để trống.",
                        "emptyStates": "Không có trạng thái đã lưu",
                        "removeConfirm": "Bạn có chắc chắn muốn xóa %s không?",
                        "removeError": "Không xóa được trạng thái.",
                        "removeJoiner": "và",
                        "removeSubmit": "Xóa",
                        "removeTitle": "Xóa trạng thái",
                        "renameButton": "Đổi tên",
                        "renameLabel": "Tên mới cho %s:",
                        "renameTitle": "Đổi tên trạng thái"
                    },
                    "infoThousands": ".",
                    "thousands": "."
                },
            ajax: {
                url: origin + `/api/customers/${customer.id}/address`,
                type: 'GET',
                contentType: 'application/json'
            },
            "lengthChange": false,
            "ordering": false,
            searching: false,
            destroy: false,
            "aoColumns": [{
                "bVisible": false
            }
            ],
            search: false,
            columns: [
                {data: 'description'},
                {data: 'employee.fullName'},
                {data: 'createdAt'},
            ]
        })
    }

    // Nhóm khách hàng
    showCusGroup = () => {
        $('#render_table').append(`
                            <table id="tbCusGroup" class="table table-hover" style="width:100%">
                                <thead style="background-color: #f4f6f8; height: 55px">

                                <th class="align-middle" >Mã nhóm</th>
                                <th class="align-middle">Tên nhóm</th>
                                <th class="align-middle" >Loại nhóm</th>
                                <th class="align-middle" >Mô tả</th>

                                </thead>
                                <tbody>
                                </tbody>
                            </table>`);
        $('#tbCusGroup').DataTable({
            language:
                {
                    "processing": "Đang xử lý...",
                    "aria": {
                        "sortAscending": ": Sắp xếp thứ tự tăng dần",
                        "sortDescending": ": Sắp xếp thứ tự giảm dần"
                    },
                    "autoFill": {
                        "cancel": "Hủy",
                        "fill": "Điền tất cả ô với <i>%d<\/i>",
                        "fillHorizontal": "Điền theo hàng ngang",
                        "fillVertical": "Điền theo hàng dọc"
                    },
                    "buttons": {
                        "collection": "Chọn lọc <span class=\"ui-button-icon-primary ui-icon ui-icon-triangle-1-s\"><\/span>",
                        "colvis": "Hiển thị theo cột",
                        "colvisRestore": "Khôi phục hiển thị",
                        "copy": "Sao chép",
                        "copyKeys": "Nhấn Ctrl hoặc u2318 + C để sao chép bảng dữ liệu vào clipboard.<br \/><br \/>Để hủy, click vào thông báo này hoặc nhấn ESC",
                        "copySuccess": {
                            "1": "Đã sao chép 1 dòng dữ liệu vào clipboard",
                            "_": "Đã sao chép %d dòng vào clipboard"
                        },
                        "copyTitle": "Sao chép vào clipboard",
                        "pageLength": {
                            "-1": "Xem tất cả các dòng",
                            "_": "Hiển thị %d dòng",
                            "1": "Hiển thị 1 dòng"
                        },
                        "print": "In ấn",
                        "createState": "Tạo trạng thái",
                        "csv": "CSV",
                        "excel": "Excel",
                        "pdf": "PDF",
                        "removeAllStates": "Xóa hết trạng thái",
                        "removeState": "Xóa",
                        "renameState": "Đổi tên",
                        "savedStates": "Trạng thái đã lưu",
                        "stateRestore": "Trạng thái %d",
                        "updateState": "Cập nhật"
                    },
                    "select": {
                        "cells": {
                            "1": "1 ô đang được chọn",
                            "_": "%d ô đang được chọn"
                        },
                        "columns": {
                            "1": "1 cột đang được chọn",
                            "_": "%d cột đang được được chọn"
                        },
                        "rows": {
                            "1": "1 dòng đang được chọn",
                            "_": "%d dòng đang được chọn"
                        }
                    },
                    "searchBuilder": {
                        "title": {
                            "_": "Thiết lập tìm kiếm (%d)",
                            "0": "Thiết lập tìm kiếm"
                        },
                        "button": {
                            "0": "Thiết lập tìm kiếm",
                            "_": "Thiết lập tìm kiếm (%d)"
                        },
                        "value": "Giá trị",
                        "clearAll": "Xóa hết",
                        "condition": "Điều kiện",
                        "conditions": {
                            "date": {
                                "after": "Sau",
                                "before": "Trước",
                                "between": "Nằm giữa",
                                "empty": "Rỗng",
                                "equals": "Bằng với",
                                "not": "Không phải",
                                "notBetween": "Không nằm giữa",
                                "notEmpty": "Không rỗng"
                            },
                            "number": {
                                "between": "Nằm giữa",
                                "empty": "Rỗng",
                                "equals": "Bằng với",
                                "gt": "Lớn hơn",
                                "gte": "Lớn hơn hoặc bằng",
                                "lt": "Nhỏ hơn",
                                "lte": "Nhỏ hơn hoặc bằng",
                                "not": "Không phải",
                                "notBetween": "Không nằm giữa",
                                "notEmpty": "Không rỗng"
                            },
                            "string": {
                                "contains": "Chứa",
                                "empty": "Rỗng",
                                "endsWith": "Kết thúc bằng",
                                "equals": "Bằng",
                                "not": "Không phải",
                                "notEmpty": "Không rỗng",
                                "startsWith": "Bắt đầu với",
                                "notContains": "Không chứa",
                                "notEndsWith": "Không kết thúc với",
                                "notStartsWith": "Không bắt đầu với"
                            },
                            "array": {
                                "equals": "Bằng",
                                "empty": "Trống",
                                "contains": "Chứa",
                                "not": "Không",
                                "notEmpty": "Không được rỗng",
                                "without": "không chứa"
                            }
                        },
                        "logicAnd": "Và",
                        "logicOr": "Hoặc",
                        "add": "Thêm điều kiện",
                        "data": "Dữ liệu",
                        "deleteTitle": "Xóa quy tắc lọc",
                        "leftTitle": "Giảm thụt lề",
                        "rightTitle": "Tăng thụt lề"
                    },
                    "searchPanes": {
                        "countFiltered": "{shown} ({total})",
                        "emptyPanes": "Không có phần tìm kiếm",
                        "clearMessage": "Xóa hết",
                        "loadMessage": "Đang load phần tìm kiếm",
                        "collapse": {
                            "0": "Phần tìm kiếm",
                            "_": "Phần tìm kiếm (%d)"
                        },
                        "title": "Bộ lọc đang hoạt động - %d",
                        "count": "{total}",
                        "collapseMessage": "Thu gọn tất cả",
                        "showMessage": "Hiện tất cả"
                    },
                    "datetime": {
                        "hours": "Giờ",
                        "minutes": "Phút",
                        "next": "Sau",
                        "previous": "Trước",
                        "seconds": "Giây",
                        "amPm": [
                            "am",
                            "pm"
                        ],
                        "unknown": "-",
                        "weekdays": [
                            "Chủ nhật"
                        ],
                        "months": [
                            "Tháng Một",
                            "Tháng Hai",
                            "Tháng Ba",
                            "Tháng Tư",
                            "Tháng Năm",
                            "Tháng Sáu",
                            "Tháng Bảy",
                            "Tháng Tám",
                            "Tháng Chín",
                            "Tháng Mười",
                            "Tháng Mười Một",
                            "Tháng Mười Hai"
                        ]
                    },
                    "emptyTable": "Không có dữ liệu",
                    "info": "Hiển thị _START_ tới _END_ của _TOTAL_ dữ liệu",
                    "infoEmpty": "Hiển thị 0 tới 0 của 0 dữ liệu",
                    "lengthMenu": "Hiển thị _MENU_ dữ liệu",
                    "loadingRecords": "Đang tải...",
                    "paginate": {
                        "first": "Đầu tiên",
                        "last": "Cuối cùng",
                        "next": "Sau",
                        "previous": "Trước"
                    },
                    "search": "Tìm kiếm:",
                    "zeroRecords": "Không tìm thấy kết quả",
                    "decimal": ",",
                    "editor": {
                        "close": "Đóng",
                        "create": {
                            "button": "Thêm",
                            "submit": "Thêm",
                            "title": "Thêm mục mới"
                        },
                        "edit": {
                            "button": "Sửa",
                            "submit": "Cập nhật",
                            "title": "Sửa mục"
                        },
                        "error": {
                            "system": "Đã xảy ra lỗi hệ thống (&lt;a target=\"\\\" rel=\"nofollow\" href=\"\\\"&gt;Thêm thông tin&lt;\/a&gt;)."
                        },
                        "multi": {
                            "info": "Các mục đã chọn chứa các giá trị khác nhau cho đầu vào này. Để chỉnh sửa và đặt tất cả các mục cho đầu vào này thành cùng một giá trị, hãy nhấp hoặc nhấn vào đây, nếu không chúng sẽ giữ lại các giá trị riêng lẻ của chúng.",
                            "noMulti": "Đầu vào này có thể được chỉnh sửa riêng lẻ, nhưng không phải là một phần của một nhóm.",
                            "restore": "Hoàn tác thay đổi",
                            "title": "Nhiều giá trị"
                        },
                        "remove": {
                            "button": "Xóa",
                            "confirm": {
                                "_": "Bạn có chắc chắn muốn xóa %d hàng không?",
                                "1": "Bạn có chắc chắn muốn xóa 1 hàng không?"
                            },
                            "submit": "Xóa",
                            "title": "Xóa"
                        }
                    },
                    "infoFiltered": "(được lọc từ _MAX_ dữ liệu)",
                    "searchPlaceholder": "Nhập tìm kiếm...",
                    "stateRestore": {
                        "creationModal": {
                            "button": "Thêm",
                            "columns": {
                                "search": "Tìm kiếm cột",
                                "visible": "Khả năng hiển thị cột"
                            },
                            "name": "Tên:",
                            "order": "Sắp xếp",
                            "paging": "Phân trang",
                            "scroller": "Cuộn vị trí",
                            "search": "Tìm kiếm",
                            "searchBuilder": "Trình tạo tìm kiếm",
                            "select": "Chọn",
                            "title": "Thêm trạng thái",
                            "toggleLabel": "Bao gồm:"
                        },
                        "duplicateError": "Trạng thái có tên này đã tồn tại.",
                        "emptyError": "Tên không được để trống.",
                        "emptyStates": "Không có trạng thái đã lưu",
                        "removeConfirm": "Bạn có chắc chắn muốn xóa %s không?",
                        "removeError": "Không xóa được trạng thái.",
                        "removeJoiner": "và",
                        "removeSubmit": "Xóa",
                        "removeTitle": "Xóa trạng thái",
                        "renameButton": "Đổi tên",
                        "renameLabel": "Tên mới cho %s:",
                        "renameTitle": "Đổi tên trạng thái"
                    },
                    "infoThousands": ".",
                    "thousands": "."
                },
            ajax: {
                url: origin + `/api/customers/${customer.id}/address`,
                type: 'GET',
                contentType: 'application/json'
            },
            "lengthChange": false,
            "ordering": false,
            searching: false,
            destroy: false,
            "aoColumns": [{
                "bVisible": false
            }
            ],
            search: false,
            columns: [
                {data: 'group.cusGrpCode'},
                {data: 'group.title'},
                {
                    "data": "group_type", // can be null or undefined
                    "defaultContent": "Mặc định"
                },
                {
                    "data": "description",
                    "defaultContent": "---"
                }
            ]
        })
    }


    deleteEventModelShow();





    showModalDelete();
    deleteCustomerHander();


    // -----------------------------------------------------------
    handleCreateShowCustomer();

    function handleCreateShowCustomer() {
        $('#btn_showModalCreateAddress').click(function () {
            $('#modal_create_shippingAddress').modal('show');
        })
    }

    // Thêm mới địa chỉ

    $("#address").on('click', () => {

        customer.fullName = $('#fullName').val();
        customer.phoneNumber = $('#phoneNumber').val();
        customer.email = $('#email').val();
        address.supplierId = 1;
        address.id = 2
        address.line1 = $('.addressCreate').val();
        address.s = "b"
        address.fullName = $('.fullNameCreate').val();
        address.phoneNumber = $('.mobileCreate').val();
        address.email = $('.emailCreate').val();
        // shippingAddress.address = $('.addressCreate').val();
        address.provinceId = $('#province').val();
        address.provinceName = $('#province :selected').text();
        address.districtId = $('#district').val();
        address.districtName = $('#district :selected').text();
        address.wardId = $('#ward').val();
        address.wardName = $('#ward :selected').text();
        address.customerId = $('.idCustomerDelete').val();
        address.zipCode = $('.zipCodeCreate').val();
        customer.address = address;
        address.isDefault = true;
        console.log(address)
        $.ajax({
            "headers": {
                "accept": "application/json",
                "content-type": "application/json"
            },
            "type": "POST",
            "url": origin + "/api/shippingAddress/create",
            "data": JSON.stringify(address)
        })
            .done((data) => {
                CustomerApp.IziToast.showSuccessAlert('Thêm mới khách hàng thành công  !!!')
                $('#modal_create_shippingAddress').off('show');
                showCustomerInfoShippingAddressByCustomerId();
            })
            .fail((jqXHR) => {
                $.each(jqXHR.responseJSON, (key, item) => {
                    CustomerApp.IziToast.showErrorAlert(item);
                })

            })
    })

    $(document).ready(function () {
        showContacts();
        removeTableNotes();
        removeTableAddress();
        removeTableCusGroup();

        $('#contacts').css({
            'color': '#4a8aff',
            'border-bottom': '2px solid rgb(0, 136, 255)'
        });
    });

    // --------------------------------------------------------------

     */
</script>
</html>