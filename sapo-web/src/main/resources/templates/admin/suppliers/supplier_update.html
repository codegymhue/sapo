<!DOCTYPE html>
<html class="sapo-menu-expand sapo-menu-toggle-active" lang="vi-VN">
<head>
    <meta charset="utf-8"/>
<!--    <th:block th:replace="/layout/header.html"/>-->
    <script>
        var CKEDITOR_BASEPATH = '/v2/lib/ckeditor/';
        var S_LANG = 'vi-VN';
        var S_LANG_RES = 'https://sapo.dktcdn.net/sapo-frontend-x/d9ad77d.i18n_vi-VN.json';
    </script>
    <script src="https://sapo.dktcdn.net/sapo-frontend-x/d852af0.client.bundle.js"></script>
    <link rel="stylesheet" href="https://sapo.dktcdn.net/sapo-frontend-x/6386cc5.main.css"/>
    <script src="https://sapo.dktcdn.net/fe-cdn-production/lib/wootric/wootric-sdk.js"></script>
    <script src="https://sapo.dktcdn.net/fe-cdn-production/lib/upload-files/jquery.multifile.js"></script>

    <link href="https://sapo.dktcdn.net/fe-cdn-production/lib/driver/driver.min.css?v=20220218" rel="stylesheet"/>

</head>
<body class="body_dashboard partners suppliers edit">
<th:block th:replace="/layout/menu :: menu"/>
<div id="container">
    <div class="hidden" context="tenantInfo"
         define="{tenantInfo: new Components.TenantInfo(this,{&quot;countries&quot;:{&quot;countryId&quot;:201}})}"></div>
    <div class="header-mobile">
        <a href="javascript:" class="icon-menu visible-xs visible-sm" onclick="showMenu()">
            <svg class="next-icon next-icon--size-20">
                <use xlink:href="#icon-menu" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
            </svg>
        </a>
    </div>

    <div class="col-right">
        <div class="col-right_content" id="content">
            <div class="ui-title-top-bar">
                <div class="ui-title-top-bar_action w-100 flex">
                    <div class="w-50" style="padding-top:5px">
                    </div>
                    <div class="w-50" style="position:relative">
                        <a href="javascript:" class="btn sapo-btn-default right btn-update-supplier"
                           bind-event-click="editSupplier.updateSupplier()">Lưu</a>
                        <a th:href="'/admin/suppliers/' + ${supplier.id} + '/histories'" class="btn sapo-btn-blank right mr-3">Huỷ</a>
                    </div>

                    <style>
                        .help-dashboard .help-dropdown .help-popup {
                            top: 60px;
                            box-shadow: #c6c6c6 0px 3px 5px 0px;
                        }

                        .help-dashboard .help-dropdown .help-popup:after {
                            right: 20px;
                        }
                        .help-dropdown {
                            position: relative;
                            margin-left: 10px;
                            height: 36px;
                        }

                        .help-dropdown a {
                            color: #686868;
                            display: flex;
                            height: 100%;
                            border: none;
                            flex-direction: row;
                            justify-content: center;
                            align-items: center;
                            cursor: pointer;
                            border: 1px solid #c4cdd5;
                            float: right;
                            width: auto;
                        }

                        .help-dropdown div:hover {
                            background-color: #e7f2ff;
                        }
                        .help-dropdown .help-popup {
                            position: absolute;
                            right: 0;
                            z-index: 9999999;
                            top: 45px;
                            box-shadow: #c6c6c6 0 0 10px 5px;
                            display: none;
                            -webkit-transition: ease 0.5s; /* Safari */
                            transition: ease 0.5s;
                        }

                        .help-dropdown .help-popup:after {
                            content: "";
                            display: block;
                            width: 0px;
                            height: 0px;
                            border-left: 10px solid transparent;
                            border-right: 10px solid transparent;
                            border-bottom: 10px solid #f3f6f8;
                            top: -9px;
                            position: absolute;
                            right: 25px;
                        }
                    </style>
                    <div class="header-fr help-dropdown">
                        <a class="btn sapo-btn-blank btn-help" onclick="showHelpPopup()"><img
                                src="/v2/images/dashboard/icons8-help-20.png" style="padding-right: 5px;"/><span>Trợ giúp</span></a>
                        <div class="help-popup">
                            <iframe id="iframe-help" src="" style="width: 400px; height: 560px;border:none"></iframe>
                            <input type="hidden" id="iframe-help-src"
                                   value="https://support.sapo.vn?ver=2&amp;view=pos&amp;url=http://anges.mysapogo.com/admin/suppliers/206718863/edit"/>
                        </div>
                    </div>

                </div>
            </div>
            <header class="ui-title-bar-container" style="margin-top: 55px;">
                <div class="ui-title-bar">
                    <div class="ui-title-bar__navigation">
                        <div class="ui-breadcrumbs">
                            <a href="/admin/suppliers">
                                <svg class="next-icon next-icon--size-20 next-icon--no-nudge">
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                         xlink:href="#chevron-left-thinner"></use>
                                </svg>
                                <span class="ui-breadcrumb__item">Danh sách nhà cung cấp
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="ui-title-bar__main-group">
                        <div class="ui-title-bar__heading-group">
                            <h1 class="ui-title-bar__title">Cập nhật nhà cung cấp
                                <span th:value="${supplier.id}" th:text="${supplier.name}"></span>

                            </h1>
                        </div>
                    </div>
                </div>
            </header>
            <div class="customer-container container" id="form-create-supplier" context="editSupplier">
            <div class="customer-create--left">
                <div class="page-info">
                    <div class="page-info-body">
                        <div class="col-12 field p-0">
                            <div class="label mb-2 label-required">Tên nhà cung cấp</div>
                            <input bind="name" class="sapo-textbox w100" data-toggle="tooltip"
                                   placeholder="Nhập tên nhà cung cấp"
                                   bind-event-input="checkValidateDataSupplier(this)" th:field="${supplier.name}">
                        </div>
                        <div class="col-6 field pl-0">
                            <div class="label mb-2">Mã nhà cung cấp</div>
                            <input bind="code" class="sapo-textbox w100" data-toggle="tooltip"
                                   bind-event-input="checkValidateDataSupplier(this)" th:field="${supplier.supplierCode}">
                        </div>
                        <div class="col-6 field pr-0">
                            <div class="label mb-2">Nhóm nhà cung cấp</div>
                            <div class="select__wrapper " id="search-supplier-group-wrap">
                                <a class="sapo-select select--a select-suggest" id="search-supplier-group"
                                   href="javascript:">
                                    Kh&#xE1;c </a>
                                <svg class="next-icon next-icon--size-16">
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                         xlink:href="#select-chevron"></use>
                                </svg>
                                <div class="filter-body--suggest">
                                </div>
                            </div>
                        </div>
                        <div class="col-6 field pl-0">
                            <div class="label mb-2">Số điện thoại</div>
                            <input bind="phoneNumber" class="sapo-textbox w100" data-toggle="tooltip"
                                   bind-event-input="checkValidateDataSupplier(this)" th:field="${supplier.phone}">
                            <div id="warning-dubble-phone" style="display:none;font-size:13px;color:#f6574d"></div>
                        </div>
                        <div class="col-6 field pr-0">
                            <div class="label mb-2">Email</div>
                            <input bind="email" class="sapo-textbox w100" data-toggle="tooltip"
                                   bind-event-input="checkValidateDataSupplier(this)" th:field="${supplier.email}">
                        </div>
                    </div>
                </div>

                <div class="page-info">
                    <div class="page-info-title">
                        Thông tin bổ sung
                    </div>
                    <div class="page-info-body">
                        <div class="col-6 field pl-0">
                            <div class="label mb-2">Số fax</div>
                            <input bind="fax" class="sapo-textbox w100" data-toggle="tooltip"
                                   bind-event-input="checkValidateDataSupplier(this)" th:field="${supplier.attFax}">
                        </div>
                        <div class="col-6 field pr-0">
                            <div class="label mb-2">Mã số thuế</div>
                            <input bind="taxNumber" class="sapo-textbox w100" data-toggle="tooltip"
                                   bind-event-input="checkValidateDataSupplier(this)" th:field="${supplier.attTaxCode}">
                        </div>
                        <div class="col-6 field pl-0">
                            <div class="label mb-2">Website</div>
                            <input bind="website" class="sapo-textbox w100" data-toggle="tooltip"
                                   bind-event-input="checkValidateDataSupplier(this)" th:field="${supplier.attWebsite}">
                        </div>
                        <div class="col-6 field pr-0">
                            <div class="label mb-2">Trạng thái nhà cung cấp</div>
                            <select bind="status" class="w100 input-dropdown sapo-btn-blank select-padding" th:field="${supplier.status}">
                                <option th:seleted="${supplier.status.toString() == 'AVAILABLE'}" value="AVAILABLE">Đang giao dịch</option>
                                <option th:seleted="${supplier.status.toString() == 'UNAVAILABLE'}" value="UNAVAILABLE">Ngừng giao dịch</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="customer-create--right">
                <div class="page-info">
                    <div class="page-info-title">
                        Thông tin khác
                    </div>
                    <div class="page-info-body">
                        <div class="col-12 field p-0">
                            <div class="label mb-2">Nhân viên phụ trách</div>
                            <div class="select__wrapper " id="search-account-wrap">
                                <a class="sapo-select select--a select-suggest" id="search-account"
                                   href="javascript:" >
                                    <span th:text="${supplier.employee.fullName}"></span>
                                </a>
                                <svg class="next-icon next-icon--size-16">
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                         xlink:href="#select-chevron"></use>
                                </svg>
                                <div class="filter-body--suggest">
                                </div>
                            </div>
                        </div>
                        <div class="page-info-item col-12 no-padding mb-4">
                            <div class="page-info-item-title">
                                MÔ TẢ
                                <i class="fa fa-info" data-toggle="tooltip" data-placement="top"></i>
                            </div>
                            <textarea bind="description" class="sapo-textbox" style="height:54px" th:text="${supplier.description}"></textarea>
                        </div>
                        <div class="page-info-item col-12 p-0">
                            <div class="page-info-item-title">
                                TAG
                                <i class="fa fa-info" data-toggle="tooltip" data-placement="top"
                                   title="Chọn hoặc thêm thẻ sẽ cho phép bạn tìm kiếm và lọc nhà cung cấp ở trang danh sách dễ dàng hơn"></i>
                            </div>
                            <input class="sapo-textbox tags" bind="tagso" value="fastfuasj"/>
                        </div>
                    </div>
                </div>
                <div class="page-info">
                    <div class="page-info-title">
                        Cài đặt nâng cao
                        <i class="fa fa-info" data-toggle="tooltip" data-placement="top"
                           title="Thiết lập các thông số tự động dùng trong các giao dịch"></i>

                    </div>
                    <div class="page-info-body">

                        <div id="config-customer" class="w-100">
                            <div class="col-12 field p-0">
                                <div class="label mb-2">Giá mặc định</div>
                                <div class="select__wrapper " id="search-price-list-wrap">
                                    <a class="sapo-select select--a select-suggest" id="search-price-list"
                                       href="javascript:">
                                        Chọn giá mặc định </a>
                                    <svg class="next-icon next-icon--size-16">
                                        <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                             xlink:href="#select-chevron"></use>
                                    </svg>
                                    <div class="filter-body--suggest">
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 field p-0">
                                <div class="label mb-2">Hình thức thanh toán</div>
                                <select class="w100 input-dropdown sapo-btn-blank select-padding"
                                        bind="defaultPaymentMethodId" >
<!--                                  th:field="${supplier.paymentMethod}"-->
<!--                                    <option th:value="${supplier.paymentMethod.id}" th:text="${supplier.paymentMethod.fullName}">Chọn hình thức</option>-->
                                    <option value="3023202">
                                        Qu&#x1EB9;t th&#x1EBB;
                                    </option>
                                    <option value="3023201">
                                        Thanh to&#xE1;n b&#x1EB1;ng &#x111;i&#x1EC3;m
                                    </option>
                                    <option value="3023200">
                                        COD
                                    </option>
                                    <option value="3023199">
                                        Chuy&#x1EC3;n kho&#x1EA3;n
                                    </option>
                                    <option value="3023198">
                                        Ti&#x1EC1;n m&#x1EB7;t
                                    </option>
                                </select>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="ui-title-bottom-bar">
                <a href="javascript:" class="btn sapo-btn-default right btn-update-supplier"
                   bind-event-click="updateSupplier()" id="btnUpdateSupplier">Lưu</a>
                <a href="/admin/suppliers/206718863" class="btn sapo-btn-blank right mr-3">Huỷ</a>
            </div>
            <script class="modal_source" define="{createSupplierGroupModal: new Components.Modal(this)}"
                    type="text/html">
                <div class="modal-dialog modal-dialog-new form-create-customer-group">
                    <div class="modal-content">
                        <div class="modal-header">
                    <span class="ui-dialog-title">
                        Thêm mới nhóm nhà cung cấp
                    </span>
                            <span class="modal-close-wrapper">
                        <svg class="ui-icon-x ui-icon-x-20"> <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                  xlink:href="#cancel-small-minor"></use> </svg>
                    </span>

                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-6">
                                    <div class="left field w-100">
                                        <div class="label mb-2 label-required">Tên nhóm</div>
                                        <input class="sapo-textbox w100 pull-left" bind="supplierGroup.name"
                                               bind-event-input="checkValidateDataSupplierGroup(this)"
                                               data-toggle="tooltip" placeholder="Nhập tên nhóm nhà cung cấp">
                                    </div>
                                    <div class="left field w-100 mb-2">
                                        <div class="label mb-2">Mã nhóm</div>
                                        <input class="sapo-textbox w100 pull-left" bind="supplierGroup.code"
                                               bind-event-input="checkValidateDataSupplierGroup(this)"
                                               data-toggle="tooltip" placeholder="Nhập mã nhóm nhà cung cấp">
                                    </div>
                                </div>
                                <div class="col-6 field mb-2">
                                    <div class="label mb-2">Ghi chú</div>
                                    <textarea bind="supplierGroup.note" class="sapo-textbox"
                                              style="height:113px"></textarea>
                                </div>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <div class="action-btn clearfix">
                                <button class="btn btn-default pull-right margin-left-5 sapo-btn-default"
                                        href="javascript:void(0)" bind-event-click="createSupplierGroup(this)">Thêm
                                </button>
                                <button class="close-modal btn btn-blank pull-right" type="button">
                                    Thoát
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </script>
            <script class="modal_source" define="{createPriceListModal: new Components.Modal(this)}"
                    type="text/html">
                <div class="modal-dialog modal-dialog-new form-create-price-list">
                    <div class="modal-content">
                        <div class="modal-header">
                    <span class="ui-dialog-title">
                        Thêm chính sách giá
                    </span>
                            <span class="modal-close-wrapper">
                        <svg class="ui-icon-x ui-icon-x-20"> <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                  xlink:href="#cancel-small-minor"></use> </svg>
                    </span>

                        </div>
                        <div class="modal-body newscroll" id="body-price-list">
                            <div class="row">
                                <div class="col-12 col-md-6 field">
                                    <div class="label mb-2 label-required">Tên chính sách giá</div>
                                    <input class="sapo-textbox w100 pull-left" bind="priceList.name"
                                           bind-event-input="checkValidateDataPriceList(this)" data-toggle="tooltip"
                                           placeholder="Ví dụ: Giá bán lẻ">
                                </div>
                                <div class="col-12 col-md-6 field">
                                    <div class="label mb-2 label-required">Mã chính sách giá</div>
                                    <input class="sapo-textbox w100 pull-left" bind="priceList.code"
                                           bind-event-input="checkValidateDataPriceList(this)" data-toggle="tooltip"
                                           placeholder="Ví dụ: BANLE">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12 field m-0">
                                    <div class="label mb-2">Áp dụng cho:</div>
                                    <div class="group-radiobox flex">
                                        <label class="flex cursor-pointer" style="width: 150px;">
                                    <span class="sapo-radiobox mr-2">
                                        <input bind="priceList.isCost" autocomplete="off" class="sapo-radiobox__input"
                                               type="radio" name="priceList.isCost" value="False" checked>
                                        <span class="sapo-radiobox__icon"></span>
                                    </span>
                                            Bán hàng
                                        </label>
                                        <label class="flex cursor-pointer" style="width: auto;">
                                    <span class="sapo-radiobox mr-2">
                                        <input bind="priceList.isCost" autocomplete="off" class="sapo-radiobox__input"
                                               type="radio" name="priceList.isCost" value="True">
                                        <span class="sapo-radiobox__icon"></span>
                                    </span>
                                            Nhập hàng
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="action-btn clearfix">
                                <button class="btn btn-default pull-right margin-left-5 sapo-btn-default"
                                        href="javascript:void(0)" bind-event-click="createPriceList(this)">Thêm
                                </button>
                                <button class="close-modal btn btn-blank pull-right" type="button">
                                    Thoát
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </script>
        </div>
    </div>
    <div class="popup-box">
        <iframe scrolling="no" src="about:blank" name="myIframe" id="popupPrint"
                style="border:0;position:absolute;width:0px;height:0px;left:0px;top:0px;"></iframe>
    </div>
</div>
</div>
<div class="section-footer">
</div>
<div class='container-fluid-md notifications'>
    <div class='ajax-notification'><span class='ajax-notification-message'></span></div>
</div>
<div class="modal fade" id="sapo-modal-container" data-width="" tabindex="-1" role="dialog" data-backdrop="false"></div>
<div class="modal-backdrop fade in" id="sapo-modal-backdrop"></div>
<style>
    #surveys {
        position: fixed;
        bottom: 0;
        width: calc(100% - 23rem);
        right: 0;
        z-index: 999999
    }

    .sapo-menu-collapse #surveys {
        width: calc(100% - 5.6rem) !important;
    }
</style>
<div id="surveys"></div>
<script>
    Page();
    hj('trigger', 'split_test_b');
</script>
<div context="notificationVNPay"
     define="{notificationVNPay: new Components.NotificationVNPay(this, {accountId:941587 })}">
    <div class="popup-notification">
        <a href="javascript:" bind-event-click="closeNoti()" class="close">
            <svg>
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#cancel-small-minor"></use>
            </svg>
        </a>
        <a href="" target="_blank" class="link-order">
            <img class="left" src="/v2/images/ico-sapo.png"/>

        </a>
        <a href="" target="_blank" class="link-order">
            <div class="title left">Thanh toán đơn hàng</div>
            <div class="desc left"></div>
        </a>
    </div>
</div>
﻿

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-66880228-3"></script>
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WQ8HRN" height="0" width="0"
            style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->

<th:block th:replace="/layout/footer.html"/>
</body>
<script>
    class Supplier {
        constructor(id, supplierCode, name,email, phone, status, description, employee, paymentMethod, group, createAt, updateAt, deleted) {
            this.id = id;
            this.supplierCode = supplierCode;
            this.name = name;
            this.email = email;
            this.phone = phone;
            this.status = status;
            this.description = description;
            this.paymentMethodId = paymentMethod;
            this.createAt = createAt;
            this.updatedAt = updateAt;
            this.deleted = deleted;
        }
    }
    $("#btnUpdateSupplier").on('click', () => {
        let newSupplier = {
            id: supplier.id,
            name: $("#")
        }
        $.ajax({
            "headers": {
                "accept": "application/json",
                "content-type": "application/json"
            },
            "type": "PUT",
            "url": `http://localhost:8080/api/admin/suppliers/${supplier.id}/edit`,
            // "data": JSON.stringify()
        })
            .done((data) => {
                // console.log(data)
                App.IziToast.showSuccessAlert("Sửa thông tin nhà cung cấp thành công !");
                setTimeout(() => {
                }, 1500)
                window.location.href = `/admin/suppliers/${supplier.id}/edit`;

            })
            .fail((jqXHR) => {
                console.log(jqXHR);
                App.IziToast.showErrorAlert(App.AlertMessageVi.ERROR_400)

            })
    })

</script>
</html>
